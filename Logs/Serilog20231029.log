[2023-10-29 21-46-59.813 -07:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
][2023-10-29 21-46-59.923 -07:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
][2023-10-29 21-46-59.973 -07:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
][2023-10-29 21-47-00.131 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
][2023-10-29 21-47-00.172 -07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
][2023-10-29 21-47-00.212 -07:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
][2023-10-29 21-47-00.268 -07:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
][2023-10-29 21-47-00.300 -07:00 [INF] Applying migration '20230827223640_initial'.
][2023-10-29 21-47-00.496 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Administrators] (
    [ID] int NOT NULL IDENTITY,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Administrators] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.549 -07:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Managers] (
    [ID] int NOT NULL IDENTITY,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Managers] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.596 -07:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Members] (
    [ID] int NOT NULL IDENTITY,
    [SelectedTrainerId] int NULL,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Members] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.648 -07:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Receptionists] (
    [ID] int NOT NULL IDENTITY,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Receptionists] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.693 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RegistrationRequests] (
    [Id] int NOT NULL IDENTITY,
    [FirstName] nvarchar(max) NULL,
    [LastName] nvarchar(max) NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Role] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(max) NULL,
    CONSTRAINT [PK_RegistrationRequests] PRIMARY KEY ([Id])
);
][2023-10-29 21-47-00.736 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Sellers] (
    [ID] int NOT NULL IDENTITY,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Sellers] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.783 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Sponsors] (
    [ID] int NOT NULL IDENTITY,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Sponsors] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.942 -07:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Trainers] (
    [ID] int NOT NULL IDENTITY,
    [Specialization] nvarchar(max) NULL,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [BirthDate] nvarchar(max) NULL,
    [UserName] nvarchar(max) NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [Password] nvarchar(50) NULL,
    [RegistrationDate] datetime2 NULL,
    [AccessToken] nvarchar(max) NULL,
    [RefreshToken] nvarchar(max) NULL,
    CONSTRAINT [PK_Trainers] PRIMARY KEY ([ID])
);
][2023-10-29 21-47-00.986 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Memberships] (
    [IdMembership] int NOT NULL IDENTITY,
    [MembershipAmount] nvarchar(max) NOT NULL,
    [Month] int NULL,
    [ID] int NULL,
    CONSTRAINT [PK_Memberships] PRIMARY KEY ([IdMembership]),
    CONSTRAINT [FK_Memberships_Members_ID] FOREIGN KEY ([ID]) REFERENCES [Members] ([ID])
);
][2023-10-29 21-47-01.267 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Advertisements] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [Url] nvarchar(max) NULL,
    [IsMain] bit NOT NULL,
    [PublicId] nvarchar(max) NULL,
    [SponsorId] int NOT NULL,
    CONSTRAINT [PK_Advertisements] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Advertisements_Sponsors_SponsorId] FOREIGN KEY ([SponsorId]) REFERENCES [Sponsors] ([ID]) ON DELETE CASCADE
);
][2023-10-29 21-47-01.313 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Type] nvarchar(max) NOT NULL,
    [Price] nvarchar(max) NULL,
    [Url] nvarchar(max) NULL,
    [IsMain] bit NOT NULL,
    [PublicId] nvarchar(max) NULL,
    [SellerId] int NOT NULL,
    [SponsorID] int NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Products_Sellers_SellerId] FOREIGN KEY ([SellerId]) REFERENCES [Sellers] ([ID]) ON DELETE CASCADE,
    CONSTRAINT [FK_Products_Sponsors_SponsorID] FOREIGN KEY ([SponsorID]) REFERENCES [Sponsors] ([ID])
);
][2023-10-29 21-47-01.358 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Comments] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NOT NULL,
    [TrainerId] int NOT NULL,
    [MemberId] int NOT NULL,
    CONSTRAINT [PK_Comments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Comments_Members_MemberId] FOREIGN KEY ([MemberId]) REFERENCES [Members] ([ID]) ON DELETE CASCADE,
    CONSTRAINT [FK_Comments_Trainers_TrainerId] FOREIGN KEY ([TrainerId]) REFERENCES [Trainers] ([ID]) ON DELETE CASCADE
);
][2023-10-29 21-47-01.660 -07:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Ratings] (
    [Id] int NOT NULL IDENTITY,
    [Value] int NOT NULL,
    [TrainerId] int NOT NULL,
    [MemberId] int NOT NULL,
    CONSTRAINT [PK_Ratings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Ratings_Members_MemberId] FOREIGN KEY ([MemberId]) REFERENCES [Members] ([ID]) ON DELETE CASCADE,
    CONSTRAINT [FK_Ratings_Trainers_TrainerId] FOREIGN KEY ([TrainerId]) REFERENCES [Trainers] ([ID]) ON DELETE CASCADE
);
][2023-10-29 21-47-01.704 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TrainerSalaries] (
    [IdSalary] int NOT NULL IDENTITY,
    [SalaryAmount] nvarchar(max) NOT NULL,
    [ID] int NULL,
    CONSTRAINT [PK_TrainerSalaries] PRIMARY KEY ([IdSalary]),
    CONSTRAINT [FK_TrainerSalaries_Trainers_ID] FOREIGN KEY ([ID]) REFERENCES [Trainers] ([ID])
);
][2023-10-29 21-47-01.746 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Advertisements_SponsorId] ON [Advertisements] ([SponsorId]);
][2023-10-29 21-47-01.786 -07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Comments_MemberId] ON [Comments] ([MemberId]);
][2023-10-29 21-47-01.826 -07:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Comments_TrainerId] ON [Comments] ([TrainerId]);
][2023-10-29 21-47-01.866 -07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Memberships_ID] ON [Memberships] ([ID]) WHERE [ID] IS NOT NULL;
][2023-10-29 21-47-01.907 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_SellerId] ON [Products] ([SellerId]);
][2023-10-29 21-47-02.005 -07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_SponsorID] ON [Products] ([SponsorID]);
][2023-10-29 21-47-02.047 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Ratings_MemberId] ON [Ratings] ([MemberId]);
][2023-10-29 21-47-02.086 -07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Ratings_TrainerId] ON [Ratings] ([TrainerId]);
][2023-10-29 21-47-02.131 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_TrainerSalaries_ID] ON [TrainerSalaries] ([ID]) WHERE [ID] IS NOT NULL;
][2023-10-29 21-47-02.182 -07:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230827223640_initial', N'7.0.5');
][2023-10-29 21-47-02.231 -07:00 [INF] Applying migration '20230827225040_baaza'.
][2023-10-29 21-47-02.352 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Products] DROP CONSTRAINT [FK_Products_Sponsors_SponsorID];
][2023-10-29 21-47-02.392 -07:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Products_SponsorID] ON [Products];
][2023-10-29 21-47-02.558 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Products]') AND [c].[name] = N'SponsorID');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Products] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Products] DROP COLUMN [SponsorID];
][2023-10-29 21-47-02.598 -07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230827225040_baaza', N'7.0.5');
][2023-10-29 21-47-02.644 -07:00 [INF] Applying migration '20231030044649_intial'.
][2023-10-29 21-47-02.764 -07:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231030044649_intial', N'7.0.5');
][2023-10-29 21-47-38.596 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-10-29 21-47-39.001 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-10-29 21-47-39.012 -07:00 [INF] Hosting environment: Development
][2023-10-29 21-47-39.016 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-10-29 21-47-39.062 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger - -
][2023-10-29 21-47-39.298 -07:00 [INF] Request GET /swagger completed in 148 ms
][2023-10-29 21-47-39.547 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-10-29 21-47-39.577 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger - - - 301 - application/json 525.2288ms
][2023-10-29 21-47-39.995 -07:00 [INF] Request GET /swagger/index.html completed in 443 ms
][2023-10-29 21-47-40.167 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/swagger-ui-bundle.js - -
][2023-10-29 21-47-40.194 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/swagger-ui.css - -
][2023-10-29 21-47-40.194 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/swagger-ui-standalone-preset.js - -
][2023-10-29 21-47-40.336 -07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
][2023-10-29 21-47-40.336 -07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
][2023-10-29 21-47-40.339 -07:00 [INF] Request GET /swagger/swagger-ui-standalone-preset.js completed in 141 ms
][2023-10-29 21-47-40.375 -07:00 [INF] Request GET /swagger/swagger-ui.css completed in 141 ms
][2023-10-29 21-47-40.392 -07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
][2023-10-29 21-47-40.405 -07:00 [INF] Request GET /swagger/swagger-ui-bundle.js completed in 197 ms
][2023-10-29 21-47-40.638 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-47-40.638 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-47-40.638 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-47-40.638 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-47-40.820 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-47-40.820 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-47-40.820 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-47-40.820 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-47-40.828 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-47-40.825 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-47-40.825 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-47-40.831 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-47-40.857 -07:00 [ERR] Connection ID "18374686489872171012", Request ID "80000005-0002-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-47-40.857 -07:00 [ERR] Connection ID "18158513703463419905", Request ID "80000002-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-47-40.857 -07:00 [ERR] Connection ID "18302628887244308482", Request ID "80000004-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-47-40.857 -07:00 [ERR] Connection ID "18230571306091282433", Request ID "80000002-0003-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-47-40.858 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1311.1016ms
][2023-10-29 21-47-40.861 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/swagger-ui.css - - - 200 143632 text/css 667.3153ms
][2023-10-29 21-47-40.866 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-10-29 21-47-40.873 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 678.9217ms
][2023-10-29 21-47-40.879 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 7.2193ms
][2023-10-29 21-47-40.916 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 749.8230ms
][2023-10-29 21-47-40.936 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-10-29 21-47-41.039 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 102.7058ms
][2023-10-29 21-47-41.227 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-10-29 21-47-41.259 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/favicon-32x32.png - -
][2023-10-29 21-47-41.260 -07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
][2023-10-29 21-47-41.263 -07:00 [INF] Request GET /swagger/favicon-32x32.png completed in 1 ms
][2023-10-29 21-47-41.340 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-47-41.383 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-47-41.388 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-47-41.394 -07:00 [ERR] Connection ID "18230571306091282433", Request ID "80000003-0003-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-47-41.395 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/favicon-32x32.png - - - 200 628 image/png 135.8178ms
][2023-10-29 21-47-41.847 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 617 ms
][2023-10-29 21-47-41.913 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-47-41.959 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-47-41.963 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-47-41.974 -07:00 [ERR] Connection ID "18374686489872171012", Request ID "80000007-0002-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-47-41.983 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 756.0414ms
][2023-10-29 20-53-04.754 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Receptionist/create-registration-request - 0
][2023-10-29 20-53-04.760 -07:00 [INF] CORS policy execution successful.
][2023-10-29 20-53-04.764 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Receptionist/create-registration-request - 0 - 204 - - 10.2115ms
][2023-10-29 20-53-04.774 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/create-registration-request application/json 195
][2023-10-29 20-53-04.774 -07:00 [INF] CORS policy execution successful.
][2023-10-29 20-53-04.959 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.CreateRegistrationRequest (Napredne baze podataka API)'
][2023-10-29 20-53-05.014 -07:00 [INF] Route matched with {action = "CreateRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRegistrationRequest(Napredne_baze_podataka_API.Models.RegistrationRequest) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-10-29 20-53-07.926 -07:00 [INF] Executed DbCommand (177ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistrationRequests] ([BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Role], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
][2023-10-29 20-53-08.042 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-10-29 20-53-08.061 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.CreateRegistrationRequest (Napredne baze podataka API) in 3040.3988ms
][2023-10-29 20-53-08.062 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.CreateRegistrationRequest (Napredne baze podataka API)'
][2023-10-29 20-53-08.066 -07:00 [INF] Request POST /api/Receptionist/create-registration-request completed in 3289 ms
][2023-10-29 20-53-08.316 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 20-53-08.421 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 20-53-08.424 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 20-53-08.429 -07:00 [ERR] Connection ID "18302628887244308489", Request ID "8000000a-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 20-53-08.450 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/create-registration-request application/json 195 - 200 - application/json;+charset=utf-8 3675.8122ms
][2023-10-29 20-58-14.116 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Receptionist/create-registration-request - 0
][2023-10-29 20-58-14.116 -07:00 [INF] CORS policy execution successful.
][2023-10-29 20-58-14.116 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Receptionist/create-registration-request - 0 - 204 - - 0.5404ms
][2023-10-29 20-58-14.121 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/create-registration-request application/json 209
][2023-10-29 20-58-14.121 -07:00 [INF] CORS policy execution successful.
][2023-10-29 20-58-14.130 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.CreateRegistrationRequest (Napredne baze podataka API)'
][2023-10-29 20-58-14.140 -07:00 [INF] Route matched with {action = "CreateRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRegistrationRequest(Napredne_baze_podataka_API.Models.RegistrationRequest) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-10-29 20-58-14.251 -07:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistrationRequests] ([BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [Role], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
][2023-10-29 20-58-14.253 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-10-29 20-58-14.254 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.CreateRegistrationRequest (Napredne baze podataka API) in 114.3959ms
][2023-10-29 20-58-14.254 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.CreateRegistrationRequest (Napredne baze podataka API)'
][2023-10-29 20-58-14.258 -07:00 [INF] Request POST /api/Receptionist/create-registration-request completed in 133 ms
][2023-10-29 20-58-14.461 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 20-58-14.570 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 20-58-14.573 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 20-58-14.578 -07:00 [ERR] Connection ID "18302628887244308492", Request ID "8000000d-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 20-58-14.578 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/create-registration-request application/json 209 - 200 - application/json;+charset=utf-8 457.5174ms
][2023-10-29 21-02-44.187 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-02-44.187 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-02-44.187 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.5060ms
][2023-10-29 21-02-44.194 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 80
][2023-10-29 21-02-44.194 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-02-44.198 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-02-44.201 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-02-47.489 -07:00 [INF] Executed DbCommand (127ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-02-47.606 -07:00 [INF] Executed DbCommand (60ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-02-47.721 -07:00 [INF] Executed DbCommand (86ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-02-47.879 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-02-47.932 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-02-48.000 -07:00 [INF] Executed DbCommand (50ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-02-48.113 -07:00 [INF] Executed DbCommand (87ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-02-48.212 -07:00 [INF] Executed DbCommand (51ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-02-48.443 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 4242.2822ms
][2023-10-29 21-02-48.444 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-02-48.572 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 4375 ms
][2023-10-29 21-02-48.875 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-02-49.035 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 80 - 500 - application/json 4841.1117ms
][2023-10-29 21-06-42.522 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-06-42.522 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-06-42.522 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.5541ms
][2023-10-29 21-06-42.532 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83
][2023-10-29 21-06-42.532 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-06-42.532 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-06-42.532 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-06-42.782 -07:00 [INF] Executed DbCommand (232ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-06-42.843 -07:00 [INF] Executed DbCommand (53ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-06-43.205 -07:00 [INF] Executed DbCommand (358ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-06-43.650 -07:00 [INF] Executed DbCommand (441ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-06-43.959 -07:00 [INF] Executed DbCommand (300ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-06-44.029 -07:00 [INF] Executed DbCommand (66ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-06-44.076 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-06-44.461 -07:00 [INF] Executed DbCommand (376ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-06-44.644 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 2112.249ms
][2023-10-29 21-06-44.645 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-06-44.757 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 2222 ms
][2023-10-29 21-06-45.020 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-06-45.022 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83 - 500 - application/json 2490.4053ms
][2023-10-29 21-07-11.736 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-07-11.737 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-07-11.744 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 7.6871ms
][2023-10-29 21-07-11.753 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83
][2023-10-29 21-07-11.753 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-07-11.753 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-07-11.754 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-07-11.810 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-07-11.854 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-07-11.898 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-07-11.944 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-07-11.992 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-07-12.039 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-07-12.084 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-07-12.134 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-07-12.308 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 553.8812ms
][2023-10-29 21-07-12.308 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-07-12.490 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 734 ms
][2023-10-29 21-07-12.798 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-07-12.800 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83 - 500 - application/json 1047.6690ms
][2023-10-29 21-09-14.009 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-09-14.010 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-09-14.010 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.7349ms
][2023-10-29 21-09-14.016 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-09-14.016 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-09-14.016 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-09-14.017 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-09-14.073 -07:00 [INF] Executed DbCommand (53ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.119 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.171 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.219 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.269 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.320 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.370 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-09-14.500 -07:00 [INF] Executed DbCommand (48ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-09-14.672 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-09-14.679 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 662.5508ms
][2023-10-29 21-09-14.679 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-09-14.682 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 662 ms
][2023-10-29 21-09-14.870 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-09-14.961 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-09-14.965 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-09-14.970 -07:00 [ERR] Connection ID "18302628895834243076", Request ID "80000005-0002-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-09-14.970 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 954.2829ms
][2023-10-29 21-10-46.060 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-10-46.060 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-10-46.060 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.4723ms
][2023-10-29 21-10-46.065 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83
][2023-10-29 21-10-46.065 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-10-46.065 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-10-46.065 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-10-46.126 -07:00 [INF] Executed DbCommand (50ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.170 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.220 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.272 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.321 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.370 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.421 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-10-46.483 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-10-46.743 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 678.1128ms
][2023-10-29 21-10-46.744 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-10-46.906 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 838 ms
][2023-10-29 21-10-47.241 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-10-47.243 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83 - 500 - application/json 1178.5496ms
][2023-10-29 21-11-06.832 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-11-06.835 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-11-06.852 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 20.1348ms
][2023-10-29 21-11-06.860 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-11-06.860 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-11-06.860 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-11-06.861 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-11-06.907 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-11-06.953 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-11-07.002 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-11-07.051 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-11-07.099 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-11-07.148 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-11-07.194 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-11-07.240 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-11-07.241 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-11-07.241 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 380.6669ms
][2023-10-29 21-11-07.242 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-11-07.244 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 381 ms
][2023-10-29 21-11-07.438 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-11-07.545 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-11-07.548 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-11-07.553 -07:00 [ERR] Connection ID "18086456109425491984", Request ID "80000011-0001-fb00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-11-07.554 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 693.8983ms
][2023-10-29 21-11-26.530 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-11-26.530 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-11-26.533 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 2.5210ms
][2023-10-29 21-11-26.542 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-11-26.542 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-11-26.542 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-11-26.542 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-11-26.593 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.641 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.690 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.739 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.790 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.839 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.893 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-11-26.960 -07:00 [INF] Executed DbCommand (60ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-11-26.962 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-11-26.963 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 421.3443ms
][2023-10-29 21-11-26.964 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-11-26.973 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 422 ms
][2023-10-29 21-11-27.208 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-11-27.324 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-11-27.327 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-11-27.331 -07:00 [ERR] Connection ID "18302628887244308500", Request ID "80000015-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-11-27.333 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 791.4870ms
][2023-10-29 21-12-08.056 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Trainer/members - 0
][2023-10-29 21-12-08.056 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-12-08.057 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Trainer/members - 0 - 204 - - 0.3505ms
][2023-10-29 21-12-08.062 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Trainer/members - -
][2023-10-29 21-12-08.062 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-12-08.221 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API)'
][2023-10-29 21-12-08.223 -07:00 [INF] Route matched with {action = "GetAllMembers", controller = "Trainer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMembersAsync() on controller Napredne_baze_podataka_API.Controllers.TrainerController (Napredne baze podataka API).
][2023-10-29 21-12-08.711 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
][2023-10-29 21-12-08.737 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.Models.Member, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-12-08.764 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API) in 540.3464ms
][2023-10-29 21-12-08.764 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API)'
][2023-10-29 21-12-08.768 -07:00 [INF] Request GET /api/Trainer/members completed in 703 ms
][2023-10-29 21-12-09.096 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-12-09.257 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-12-09.260 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-12-09.264 -07:00 [ERR] Connection ID "18086456109425491988", Request ID "80000015-0001-fb00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-12-09.265 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Trainer/members - - - 200 - application/json;+charset=utf-8 1203.0986ms
][2023-10-29 21-12-17.375 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/add-membership/1/123 - 0
][2023-10-29 21-12-17.375 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-12-17.376 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/add-membership/1/123 - 0 - 204 - - 1.1526ms
][2023-10-29 21-12-17.384 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Manager/add-membership/1/123 - 0
][2023-10-29 21-12-17.384 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-12-17.389 -07:00 [INF] Request POST /api/Manager/add-membership/1/123 completed in 2 ms
][2023-10-29 21-12-17.443 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-12-17.474 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-12-17.476 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-12-17.482 -07:00 [ERR] Connection ID "18158513712053354506", Request ID "8000000b-0003-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-12-17.482 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Manager/add-membership/1/123 - 0 - 404 - application/json 98.5678ms
][2023-10-29 21-12-34.238 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-12-34.238 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-12-34.238 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.3840ms
][2023-10-29 21-12-34.243 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83
][2023-10-29 21-12-34.243 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-12-34.243 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-12-34.243 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-12-34.292 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.340 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.389 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.438 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.486 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.537 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.602 -07:00 [INF] Executed DbCommand (58ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-12-34.652 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-12-34.846 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 602.26ms
][2023-10-29 21-12-34.846 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-12-34.953 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 708 ms
][2023-10-29 21-12-35.190 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-12-35.193 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83 - 500 - application/json 949.8294ms
][2023-10-29 21-13-39.470 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-13-39.470 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-13-39.470 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.3692ms
][2023-10-29 21-13-39.476 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 88
][2023-10-29 21-13-39.476 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-13-39.476 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-13-39.476 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-13-39.525 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.573 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.621 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.670 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.719 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.768 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.817 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-13-39.866 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-13-40.053 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 576.2704ms
][2023-10-29 21-13-40.053 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-13-40.171 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 692 ms
][2023-10-29 21-13-40.415 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-13-40.418 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 88 - 500 - application/json 941.9048ms
][2023-10-29 21-14-48.184 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - 0
][2023-10-29 21-14-48.184 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.185 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - 0 - 204 - - 1.5967ms
][2023-10-29 21-14-48.185 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/check-selected-trainer/undefined - 0
][2023-10-29 21-14-48.186 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.186 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/check-selected-trainer/undefined - 0 - 204 - - 0.4576ms
][2023-10-29 21-14-48.186 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-10-29 21-14-48.186 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.187 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 0.4217ms
][2023-10-29 21-14-48.199 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - -
][2023-10-29 21-14-48.199 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.202 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/check-selected-trainer/undefined - -
][2023-10-29 21-14-48.202 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.204 -07:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
][2023-10-29 21-14-48.204 -07:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
][2023-10-29 21-14-48.204 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-14-48.206 -07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
][2023-10-29 21-14-48.207 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/member/undefined - 0
][2023-10-29 21-14-48.207 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.207 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/member/undefined - 0 - 204 - - 0.6628ms
][2023-10-29 21-14-48.208 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-10-29 21-14-48.208 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.208 -07:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
][2023-10-29 21-14-48.209 -07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
][2023-10-29 21-14-48.248 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/member/undefined - -
][2023-10-29 21-14-48.248 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-48.248 -07:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
][2023-10-29 21-14-48.249 -07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
][2023-10-29 21-14-48.253 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync(Sieve.Models.SieveModel) on controller Napredne_baze_podataka_API.Controllers.ManagerController (Napredne baze podataka API).
][2023-10-29 21-14-48.264 -07:00 [INF] AuthenticationScheme: Bearer was challenged.
][2023-10-29 21-14-48.264 -07:00 [INF] AuthenticationScheme: Bearer was challenged.
][2023-10-29 21-14-48.269 -07:00 [INF] AuthenticationScheme: Bearer was challenged.
][2023-10-29 21-14-48.274 -07:00 [INF] Request GET /api/Member/check-selected-trainer/undefined completed in 62 ms
][2023-10-29 21-14-48.277 -07:00 [INF] Request GET /api/Member/trainers completed in 55 ms
][2023-10-29 21-14-48.278 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/check-selected-trainer/undefined - - - 401 - application/json 76.8119ms
][2023-10-29 21-14-48.281 -07:00 [INF] Request GET /api/Member/member/undefined completed in 20 ms
][2023-10-29 21-14-48.283 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 401 - application/json 74.9295ms
][2023-10-29 21-14-48.283 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/member/undefined - - - 401 - application/json 35.1778ms
][2023-10-29 21-14-48.360 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-10-29 21-14-48.391 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.EnumerableQuery`1[[Napredne_baze_podataka_API.Models.TrainerUser, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-14-48.398 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API) in 145.0822ms
][2023-10-29 21-14-48.398 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-14-48.400 -07:00 [INF] Request GET /api/Manager/trainers completed in 199 ms
][2023-10-29 21-14-48.652 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-14-48.853 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-14-48.886 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-14-48.896 -07:00 [ERR] Connection ID "18086456109425491994", Request ID "8000001b-0001-fb00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-14-48.897 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - - - 200 - application/json;+charset=utf-8 698.7550ms
][2023-10-29 21-14-56.682 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=lastName&filters= - 0
][2023-10-29 21-14-56.682 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-56.683 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=lastName&filters= - 0 - 204 - - 0.6280ms
][2023-10-29 21-14-56.689 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=lastName&filters= - -
][2023-10-29 21-14-56.690 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-14-56.690 -07:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
][2023-10-29 21-14-56.690 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-14-56.691 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync(Sieve.Models.SieveModel) on controller Napredne_baze_podataka_API.Controllers.ManagerController (Napredne baze podataka API).
][2023-10-29 21-14-56.736 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-10-29 21-14-56.747 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.EnumerableQuery`1[[Napredne_baze_podataka_API.Models.TrainerUser, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-14-56.747 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API) in 56.5008ms
][2023-10-29 21-14-56.747 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-14-56.751 -07:00 [INF] Request GET /api/Manager/trainers completed in 57 ms
][2023-10-29 21-14-56.977 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-14-57.069 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-14-57.073 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-14-57.079 -07:00 [ERR] Connection ID "18302628887244308510", Request ID "8000001f-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-14-57.079 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=lastName&filters= - - - 200 - application/json;+charset=utf-8 390.0019ms
][2023-10-29 21-15-15.819 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-10-29 21-15-15.819 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.824 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 4.9864ms
][2023-10-29 21-15-15.827 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/check-selected-trainer/1 - 0
][2023-10-29 21-15-15.827 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.830 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/check-selected-trainer/1 - 0 - 204 - - 2.7805ms
][2023-10-29 21-15-15.833 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-10-29 21-15-15.833 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.841 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-15.844 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/member/1 - 0
][2023-10-29 21-15-15.845 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.845 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/member/1 - 0 - 204 - - 0.4412ms
][2023-10-29 21-15-15.845 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - 0
][2023-10-29 21-15-15.845 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.847 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - 0 - 204 - - 1.8713ms
][2023-10-29 21-15-15.847 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/check-selected-trainer/1 - -
][2023-10-29 21-15-15.847 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.848 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync() on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-15.850 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckSelectedTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-15.859 -07:00 [INF] Route matched with {action = "CheckSelectedTrainer", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckSelectedTrainer(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-15.860 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - -
][2023-10-29 21-15-15.860 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.860 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-15.860 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync(Sieve.Models.SieveModel) on controller Napredne_baze_podataka_API.Controllers.ManagerController (Napredne baze podataka API).
][2023-10-29 21-15-15.866 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/member/1 - -
][2023-10-29 21-15-15.866 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-15.868 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMember (Napredne baze podataka API)'
][2023-10-29 21-15-15.876 -07:00 [INF] Route matched with {action = "GetMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMember(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-15.935 -07:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-10-29 21-15-15.990 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[ID] = @__p_0
][2023-10-29 21-15-15.993 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-10-29 21-15-15.993 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.CheckSelectedTrainer (Napredne baze podataka API) in 134.1853ms
][2023-10-29 21-15-15.993 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckSelectedTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-16.000 -07:00 [INF] Request GET /api/Member/check-selected-trainer/1 completed in 146 ms
][2023-10-29 21-15-16.285 -07:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-10-29 21-15-16.287 -07:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[ID] = @__p_0
][2023-10-29 21-15-16.289 -07:00 [INF] Executing OkObjectResult, writing value of type 'Napredne_baze_podataka_API.Models.Member'.
][2023-10-29 21-15-16.290 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.EnumerableQuery`1[[Napredne_baze_podataka_API.Models.TrainerUser, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-15-16.290 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetMember (Napredne baze podataka API) in 413.715ms
][2023-10-29 21-15-16.290 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMember (Napredne baze podataka API)'
][2023-10-29 21-15-16.293 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-16.294 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API) in 434.0238ms
][2023-10-29 21-15-16.296 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-16.294 -07:00 [INF] Request GET /api/Member/member/1 completed in 423 ms
][2023-10-29 21-15-16.383 -07:00 [INF] Request GET /api/Manager/trainers completed in 435 ms
][2023-10-29 21-15-16.847 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.DTOs.TrainerDto, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-15-16.908 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API) in 1059.3361ms
][2023-10-29 21-15-16.962 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-16.963 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-16.966 -07:00 [INF] Request GET /api/Member/trainers completed in 1129 ms
][2023-10-29 21-15-16.966 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-16.970 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-17.071 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-17.356 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-17.356 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-17.360 -07:00 [ERR] Connection ID "18086456109425491996", Request ID "8000001d-0001-fb00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-17.480 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-17.480 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-17.480 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/check-selected-trainer/1 - - - 200 - application/json;+charset=utf-8 1632.9660ms
][2023-10-29 21-15-17.486 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-17.489 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-17.494 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-17.497 -07:00 [ERR] Connection ID "18302628887244308514", Request ID "80000023-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-17.503 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/member/1 - - - 200 - application/json;+charset=utf-8 1636.2081ms
][2023-10-29 21-15-17.522 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/1/check-rating/1 - 0
][2023-10-29 21-15-17.522 -07:00 [ERR] Connection ID "18230571293206380551", Request ID "80000008-0000-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-17.524 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - - - 200 - application/json;+charset=utf-8 1664.4856ms
][2023-10-29 21-15-17.522 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.525 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/1/check-rating/1 - 0 - 204 - - 2.2881ms
][2023-10-29 21-15-17.525 -07:00 [ERR] Connection ID "18230571301796315137", Request ID "80000002-0002-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-17.526 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 200 - application/json;+charset=utf-8 1692.6963ms
][2023-10-29 21-15-17.527 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/mytrainer/1 - 0
][2023-10-29 21-15-17.528 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.529 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/mytrainer/1 - 0 - 204 - - 1.5370ms
][2023-10-29 21-15-17.536 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/1/check-rating/1 - -
][2023-10-29 21-15-17.536 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.536 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckRating (Napredne baze podataka API)'
][2023-10-29 21-15-17.536 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/mytrainer/1 - -
][2023-10-29 21-15-17.537 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.537 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMyTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-17.540 -07:00 [INF] Route matched with {action = "GetMyTrainer", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyTrainer(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-17.559 -07:00 [INF] Route matched with {action = "CheckRating", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckRating(Int32, Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-17.607 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0
][2023-10-29 21-15-17.608 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.611 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0 - 204 - - 3.9339ms
][2023-10-29 21-15-17.617 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0
][2023-10-29 21-15-17.617 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.617 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0 - 204 - - 0.4884ms
][2023-10-29 21-15-17.651 -07:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[ID] = @__p_0
][2023-10-29 21-15-17.652 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - -
][2023-10-29 21-15-17.652 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-17.653 -07:00 [INF] Executing OkObjectResult, writing value of type 'Napredne_baze_podataka_API.Models.TrainerUser'.
][2023-10-29 21-15-17.654 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-17.656 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetMyTrainer (Napredne baze podataka API) in 115.4227ms
][2023-10-29 21-15-17.656 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMyTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-17.665 -07:00 [INF] Route matched with {action = "GetAverageRating", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAverageRating(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-17.671 -07:00 [INF] Request GET /api/Member/mytrainer/1 completed in 119 ms
][2023-10-29 21-15-17.780 -07:00 [INF] Executed DbCommand (79ms) [Parameters=[@__memberId_0='?' (DbType = Int32), @__trainerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[MemberId], [r].[TrainerId], [r].[Value]
FROM [Ratings] AS [r]
WHERE [r].[MemberId] = @__memberId_0 AND [r].[TrainerId] = @__trainerId_1
][2023-10-29 21-15-17.821 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-10-29 21-15-17.870 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.CheckRating (Napredne baze podataka API) in 311.0287ms
][2023-10-29 21-15-17.872 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckRating (Napredne baze podataka API)'
][2023-10-29 21-15-17.877 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-17.878 -07:00 [INF] Request GET /api/Member/1/check-rating/1 completed in 336 ms
][2023-10-29 21-15-18.205 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-18.210 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-18.211 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-18.328 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-18.332 -07:00 [ERR] Connection ID "18230571301796315139", Request ID "80000004-0002-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-18.332 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-18.333 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/mytrainer/1 - - - 200 - application/json;+charset=utf-8 796.7080ms
][2023-10-29 21-15-18.349 -07:00 [ERR] Connection ID "18374686489872171034", Request ID "8000001b-0002-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-18.350 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/1/check-rating/1 - - - 200 - application/json;+charset=utf-8 814.3341ms
][2023-10-29 21-15-18.447 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__trainerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Value] AS float))
FROM [Ratings] AS [r]
WHERE [r].[TrainerId] = @__trainerId_0
][2023-10-29 21-15-18.503 -07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Napredne_baze_podataka_API.Data.DataContext'.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
][2023-10-29 21-15-18.682 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API) in 1016.9561ms
][2023-10-29 21-15-18.682 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-18.792 -07:00 [INF] Request GET /api/Member/average-rating/1 completed in 1137 ms
][2023-10-29 21-15-19.051 -07:00 [ERR] Sequence contains no elements.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.Repo.MemberRepository.GetAverageRatingByTrainerId(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\MemberRepository.cs:line 133
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Member_Handlers.GetAverageRatingHandler.Handle(GetAverageRating request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Member Handlers\GetAverageRatingHandler.cs:line 17
   at Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\MemberController.cs:line 94
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-19.052 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - - - 500 - application/json 1400.7932ms
][2023-10-29 21-15-19.057 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - -
][2023-10-29 21-15-19.057 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-19.059 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-19.060 -07:00 [INF] Route matched with {action = "GetAverageRating", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAverageRating(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-19.140 -07:00 [INF] Executed DbCommand (75ms) [Parameters=[@__trainerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Value] AS float))
FROM [Ratings] AS [r]
WHERE [r].[TrainerId] = @__trainerId_0
][2023-10-29 21-15-19.146 -07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Napredne_baze_podataka_API.Data.DataContext'.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
][2023-10-29 21-15-19.430 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API) in 370.7342ms
][2023-10-29 21-15-19.452 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-20.152 -07:00 [INF] Request GET /api/Member/average-rating/1 completed in 1093 ms
][2023-10-29 21-15-20.462 -07:00 [ERR] Sequence contains no elements.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.Repo.MemberRepository.GetAverageRatingByTrainerId(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\MemberRepository.cs:line 133
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Member_Handlers.GetAverageRatingHandler.Handle(GetAverageRating request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Member Handlers\GetAverageRatingHandler.cs:line 17
   at Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\MemberController.cs:line 94
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-20.463 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - - - 500 - application/json 1406.0721ms
][2023-10-29 21-15-31.032 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Trainer/members - 0
][2023-10-29 21-15-31.032 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-31.034 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Trainer/members - 0 - 204 - - 1.7721ms
][2023-10-29 21-15-31.064 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Trainer/members - -
][2023-10-29 21-15-31.065 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-31.066 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-31.066 -07:00 [INF] Route matched with {action = "GetAllMembers", controller = "Trainer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMembersAsync() on controller Napredne_baze_podataka_API.Controllers.TrainerController (Napredne baze podataka API).
][2023-10-29 21-15-31.121 -07:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
][2023-10-29 21-15-31.122 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.Models.Member, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-15-31.122 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API) in 55.4961ms
][2023-10-29 21-15-31.122 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-31.125 -07:00 [INF] Request GET /api/Trainer/members completed in 57 ms
][2023-10-29 21-15-31.321 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-31.413 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-31.416 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-31.421 -07:00 [ERR] Connection ID "18230571293206380557", Request ID "8000000e-0000-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-31.422 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Trainer/members - - - 200 - application/json;+charset=utf-8 357.3320ms
][2023-10-29 21-15-33.511 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/check-selected-trainer/1 - 0
][2023-10-29 21-15-33.511 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.512 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/check-selected-trainer/1 - 0 - 204 - - 0.3635ms
][2023-10-29 21-15-33.521 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-10-29 21-15-33.522 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.522 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 0.3523ms
][2023-10-29 21-15-33.524 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/check-selected-trainer/1 - -
][2023-10-29 21-15-33.525 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.525 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckSelectedTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-33.525 -07:00 [INF] Route matched with {action = "CheckSelectedTrainer", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckSelectedTrainer(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-33.531 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-10-29 21-15-33.531 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.532 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-33.532 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync() on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-33.551 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/member/1 - 0
][2023-10-29 21-15-33.552 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.552 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - 0
][2023-10-29 21-15-33.552 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/member/1 - 0 - 204 - - 1.7868ms
][2023-10-29 21-15-33.554 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.562 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - 0 - 204 - - 2.9091ms
][2023-10-29 21-15-33.562 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/member/1 - -
][2023-10-29 21-15-33.562 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - -
][2023-10-29 21-15-33.562 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.562 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-33.564 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-33.564 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMember (Napredne baze podataka API)'
][2023-10-29 21-15-33.564 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Manager"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync(Sieve.Models.SieveModel) on controller Napredne_baze_podataka_API.Controllers.ManagerController (Napredne baze podataka API).
][2023-10-29 21-15-33.565 -07:00 [INF] Route matched with {action = "GetMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMember(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-33.575 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[ID] = @__p_0
][2023-10-29 21-15-33.577 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-10-29 21-15-33.584 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-10-29 21-15-33.585 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.CheckSelectedTrainer (Napredne baze podataka API) in 59.1055ms
][2023-10-29 21-15-33.585 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckSelectedTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-33.585 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.DTOs.TrainerDto, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-15-33.586 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API) in 54.1366ms
][2023-10-29 21-15-33.586 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-33.597 -07:00 [INF] Request GET /api/Member/check-selected-trainer/1 completed in 59 ms
][2023-10-29 21-15-33.601 -07:00 [INF] Request GET /api/Member/trainers completed in 55 ms
][2023-10-29 21-15-34.031 -07:00 [INF] Executed DbCommand (352ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-10-29 21-15-34.093 -07:00 [INF] Executed DbCommand (431ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[ID] = @__p_0
][2023-10-29 21-15-34.174 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.EnumerableQuery`1[[Napredne_baze_podataka_API.Models.TrainerUser, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-15-34.174 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-34.178 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-34.226 -07:00 [INF] Executing OkObjectResult, writing value of type 'Napredne_baze_podataka_API.Models.Member'.
][2023-10-29 21-15-34.314 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetMember (Napredne baze podataka API) in 748.3119ms
][2023-10-29 21-15-34.315 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMember (Napredne baze podataka API)'
][2023-10-29 21-15-34.316 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API) in 750.6579ms
][2023-10-29 21-15-34.316 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ManagerController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-10-29 21-15-34.377 -07:00 [INF] Request GET /api/Member/member/1 completed in 752 ms
][2023-10-29 21-15-34.379 -07:00 [INF] Request GET /api/Manager/trainers completed in 753 ms
][2023-10-29 21-15-34.576 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-34.606 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-34.662 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-34.665 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-34.668 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-34.669 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-34.673 -07:00 [ERR] Connection ID "18230571293206380559", Request ID "80000010-0000-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-34.708 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/check-selected-trainer/1 - - - 200 - application/json;+charset=utf-8 1183.4178ms
][2023-10-29 21-15-34.711 -07:00 [ERR] Connection ID "18158513703463419910", Request ID "80000007-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-34.712 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 200 - application/json;+charset=utf-8 1180.3734ms
][2023-10-29 21-15-34.886 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0
][2023-10-29 21-15-34.887 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-34.887 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0 - 204 - - 0.6548ms
][2023-10-29 21-15-34.888 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0
][2023-10-29 21-15-34.888 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-34.888 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/average-rating/1 - 0 - 204 - - 0.3601ms
][2023-10-29 21-15-34.968 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - -
][2023-10-29 21-15-34.968 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-34.968 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-34.968 -07:00 [INF] Route matched with {action = "GetAverageRating", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAverageRating(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-34.975 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-34.979 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-34.980 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-34.985 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-34.994 -07:00 [ERR] Connection ID "18374686489872171038", Request ID "8000001f-0002-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-34.995 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Manager/trainers?page=1&pageSize=3&sorts=firstName&filters= - - - 200 - application/json;+charset=utf-8 1432.5393ms
][2023-10-29 21-15-35.003 -07:00 [ERR] Connection ID "18302628887244308520", Request ID "80000029-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-35.006 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/member/1 - - - 200 - application/json;+charset=utf-8 1443.9496ms
][2023-10-29 21-15-35.043 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/1/check-rating/1 - 0
][2023-10-29 21-15-35.043 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-35.043 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/1/check-rating/1 - 0 - 204 - - 0.8767ms
][2023-10-29 21-15-35.043 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/mytrainer/1 - 0
][2023-10-29 21-15-35.044 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-35.045 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/mytrainer/1 - 0 - 204 - - 1.3401ms
][2023-10-29 21-15-35.061 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/mytrainer/1 - -
][2023-10-29 21-15-35.061 -07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__trainerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Value] AS float))
FROM [Ratings] AS [r]
WHERE [r].[TrainerId] = @__trainerId_0
][2023-10-29 21-15-35.061 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-35.061 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/1/check-rating/1 - -
][2023-10-29 21-15-35.062 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-35.066 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMyTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-35.066 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckRating (Napredne baze podataka API)'
][2023-10-29 21-15-35.066 -07:00 [INF] Route matched with {action = "GetMyTrainer", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyTrainer(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-35.066 -07:00 [INF] Route matched with {action = "CheckRating", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckRating(Int32, Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-35.071 -07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Napredne_baze_podataka_API.Data.DataContext'.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
][2023-10-29 21-15-35.148 -07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__memberId_0='?' (DbType = Int32), @__trainerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[MemberId], [r].[TrainerId], [r].[Value]
FROM [Ratings] AS [r]
WHERE [r].[MemberId] = @__memberId_0 AND [r].[TrainerId] = @__trainerId_1
][2023-10-29 21-15-35.148 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-10-29 21-15-35.182 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.CheckRating (Napredne baze podataka API) in 115.7947ms
][2023-10-29 21-15-35.183 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.CheckRating (Napredne baze podataka API)'
][2023-10-29 21-15-35.285 -07:00 [INF] Request GET /api/Member/1/check-rating/1 completed in 120 ms
][2023-10-29 21-15-35.503 -07:00 [INF] Executed DbCommand (102ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[ID] = @__p_0
][2023-10-29 21-15-35.504 -07:00 [INF] Executing OkObjectResult, writing value of type 'Napredne_baze_podataka_API.Models.TrainerUser'.
][2023-10-29 21-15-35.598 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetMyTrainer (Napredne baze podataka API) in 531.4358ms
][2023-10-29 21-15-35.650 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetMyTrainer (Napredne baze podataka API)'
][2023-10-29 21-15-35.652 -07:00 [INF] Request GET /api/Member/mytrainer/1 completed in 588 ms
][2023-10-29 21-15-35.759 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API) in 790.024ms
][2023-10-29 21-15-35.759 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-35.859 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-36.094 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-36.096 -07:00 [INF] Request GET /api/Member/average-rating/1 completed in 1125 ms
][2023-10-29 21-15-36.096 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-36.100 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-36.456 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-15-36.457 -07:00 [ERR] Connection ID "18302628887244308524", Request ID "8000002d-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-36.459 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-15-36.461 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/1/check-rating/1 - - - 200 - application/json;+charset=utf-8 1399.4905ms
][2023-10-29 21-15-36.474 -07:00 [ERR] Connection ID "18158513699168452612", Request ID "80000005-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-15-36.474 -07:00 [ERR] Sequence contains no elements.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.Repo.MemberRepository.GetAverageRatingByTrainerId(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\MemberRepository.cs:line 133
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Member_Handlers.GetAverageRatingHandler.Handle(GetAverageRating request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Member Handlers\GetAverageRatingHandler.cs:line 17
   at Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\MemberController.cs:line 94
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-36.475 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/mytrainer/1 - - - 200 - application/json;+charset=utf-8 1413.5929ms
][2023-10-29 21-15-36.481 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - - - 500 - application/json 1512.5870ms
][2023-10-29 21-15-36.497 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - -
][2023-10-29 21-15-36.497 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-15-36.497 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-36.497 -07:00 [INF] Route matched with {action = "GetAverageRating", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAverageRating(Int32) on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-10-29 21-15-36.549 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__trainerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Value] AS float))
FROM [Ratings] AS [r]
WHERE [r].[TrainerId] = @__trainerId_0
][2023-10-29 21-15-36.554 -07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Napredne_baze_podataka_API.Data.DataContext'.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
][2023-10-29 21-15-36.728 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API) in 230.4975ms
][2023-10-29 21-15-36.729 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating (Napredne baze podataka API)'
][2023-10-29 21-15-36.853 -07:00 [INF] Request GET /api/Member/average-rating/1 completed in 352 ms
][2023-10-29 21-15-37.110 -07:00 [ERR] Sequence contains no elements.
System.InvalidOperationException: Sequence contains no elements.
   at lambda_method590(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.Repo.MemberRepository.GetAverageRatingByTrainerId(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\MemberRepository.cs:line 133
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Member_Handlers.GetAverageRatingHandler.Handle(GetAverageRating request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Member Handlers\GetAverageRatingHandler.cs:line 17
   at Napredne_baze_podataka_API.Controllers.MemberController.GetAverageRating(Int32 trainerId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\MemberController.cs:line 94
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-15-37.112 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/average-rating/1 - - - 500 - application/json 614.9182ms
][2023-10-29 21-24-02.489 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-24-02.489 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-24-02.493 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 3.5507ms
][2023-10-29 21-24-02.497 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-24-02.497 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-24-02.497 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-24-02.498 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-24-02.712 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-24-02.804 -07:00 [INF] Executed DbCommand (40ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-24-02.852 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-24-02.901 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-24-02.953 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-24-03.002 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-24-03.050 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-24-03.118 -07:00 [INF] Executed DbCommand (60ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-24-03.283 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 785.337ms
][2023-10-29 21-24-03.283 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-24-03.407 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 907 ms
][2023-10-29 21-24-03.654 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-24-03.656 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 1158.4488ms
][2023-10-29 21-24-31.442 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-10-29 21-24-31.885 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-10-29 21-24-31.891 -07:00 [INF] Hosting environment: Development
][2023-10-29 21-24-31.907 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-10-29 21-24-31.956 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-10-29 21-24-32.876 -07:00 [INF] Request GET /swagger/index.html completed in 801 ms
][2023-10-29 21-24-32.888 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-10-29 21-24-33.001 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-10-29 21-24-33.242 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 349.3477ms
][2023-10-29 21-24-33.329 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-24-33.339 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 337.7835ms
][2023-10-29 21-24-33.491 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-24-33.494 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-24-33.540 -07:00 [ERR] Connection ID "18374686481282236419", Request ID "80000004-0000-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-24-33.546 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1601.2400ms
][2023-10-29 21-24-33.605 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-10-29 21-24-34.022 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 414 ms
][2023-10-29 21-24-34.120 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-24-34.158 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-24-34.161 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-24-34.166 -07:00 [ERR] Connection ID "18374686481282236419", Request ID "80000005-0000-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-24-34.169 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 563.6540ms
][2023-10-29 21-26-30.186 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-26-30.195 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-26-30.198 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 11.5215ms
][2023-10-29 21-26-30.208 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-26-30.208 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-26-30.320 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-26-30.376 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-26-33.181 -07:00 [INF] Executed DbCommand (130ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.283 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.338 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.389 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.446 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.539 -07:00 [INF] Executed DbCommand (79ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.591 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-26-33.949 -07:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-26-34.196 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-26-34.228 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 3842.9837ms
][2023-10-29 21-26-34.229 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-26-34.233 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 4023 ms
][2023-10-29 21-26-34.493 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-26-34.598 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-26-34.601 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-26-34.607 -07:00 [ERR] Connection ID "18158513699168452622", Request ID "8000000f-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-26-34.638 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 4429.9800ms
][2023-10-29 21-36-25.086 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-36-25.087 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-36-25.088 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 5.2732ms
][2023-10-29 21-36-25.093 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-36-25.093 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-36-25.109 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-36-25.110 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-36-25.475 -07:00 [INF] Executed DbCommand (56ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.571 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.620 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.670 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.721 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.768 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.818 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-36-25.881 -07:00 [INF] Executed DbCommand (51ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-36-26.093 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 982.7191ms
][2023-10-29 21-36-26.094 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-36-26.225 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 1129 ms
][2023-10-29 21-36-26.463 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-36-26.594 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 1500.3240ms
][2023-10-29 21-37-07.622 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-37-07.622 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-37-07.622 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.4633ms
][2023-10-29 21-37-07.631 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-37-07.631 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-37-07.633 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-37-07.633 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-37-07.772 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-37-07.824 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-37-07.874 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-37-07.927 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-37-07.979 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.036 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.086 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.140 -07:00 [INF] Executed DbCommand (47ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-37-08.307 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 673.5631ms
][2023-10-29 21-37-08.308 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-37-08.422 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 787 ms
][2023-10-29 21-37-08.497 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-37-08.573 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-37-08.574 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-37-08.574 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-37-08.714 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-37-08.716 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 1084.9710ms
][2023-10-29 21-37-08.748 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.796 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.841 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.889 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.936 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-37-08.983 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-37-09.031 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-37-09.084 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-37-09.238 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 663.7552ms
][2023-10-29 21-37-09.239 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-37-09.355 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 779 ms
][2023-10-29 21-37-09.655 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-37-09.658 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 1161.0183ms
][2023-10-29 21-37-26.910 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-37-26.910 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-37-26.911 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.3983ms
][2023-10-29 21-37-26.916 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-37-26.917 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-37-26.917 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-37-26.917 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-37-26.988 -07:00 [INF] Executed DbCommand (67ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.034 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.082 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.133 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.189 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.245 -07:00 [INF] Executed DbCommand (48ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.308 -07:00 [INF] Executed DbCommand (57ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-37-27.365 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-37-27.369 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-37-27.370 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 453.5273ms
][2023-10-29 21-37-27.371 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-37-27.387 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 454 ms
][2023-10-29 21-37-27.611 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-37-27.712 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-37-27.715 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-37-27.720 -07:00 [ERR] Connection ID "18158513699168452626", Request ID "80000013-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-37-27.721 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 804.3486ms
][2023-10-29 21-39-28.528 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-39-28.534 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-39-28.535 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 7.6556ms
][2023-10-29 21-39-28.542 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-39-28.542 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-39-28.542 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-39-28.542 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-39-28.596 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.645 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.701 -07:00 [INF] Executed DbCommand (49ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.750 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.800 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.849 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.901 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-39-28.949 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-39-28.950 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-39-28.951 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 408.6271ms
][2023-10-29 21-39-28.951 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-39-28.956 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 409 ms
][2023-10-29 21-39-29.139 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-39-29.235 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-39-29.238 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-39-29.243 -07:00 [ERR] Connection ID "18014398515387564046", Request ID "8000000f-0001-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-39-29.243 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 701.3942ms
][2023-10-29 21-41-43.529 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-41-43.529 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-41-43.529 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.7824ms
][2023-10-29 21-41-43.538 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-41-43.538 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-41-43.538 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-41-43.539 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-41-43.598 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.648 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.698 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.758 -07:00 [INF] Executed DbCommand (49ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.803 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.848 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.893 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-41-43.942 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-41-44.122 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 582.3346ms
][2023-10-29 21-41-44.122 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-41-44.252 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 711 ms
][2023-10-29 21-41-44.549 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-41-44.551 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 1013.2459ms
][2023-10-29 21-45-55.534 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-45-55.537 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-45-55.539 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 5.4286ms
][2023-10-29 21-45-55.547 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-45-55.548 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-45-55.548 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-45-55.548 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-45-55.594 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.638 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.682 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.726 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.771 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.818 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.863 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-45-55.914 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-45-56.086 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 538.2675ms
][2023-10-29 21-45-56.086 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-45-56.205 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 654 ms
][2023-10-29 21-45-56.430 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-45-56.433 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 885.2260ms
][2023-10-29 21-50-10.692 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-50-10.692 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-50-10.693 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.6581ms
][2023-10-29 21-50-10.698 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-50-10.698 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-50-10.699 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-50-10.699 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-50-10.777 -07:00 [INF] Executed DbCommand (61ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-50-10.844 -07:00 [INF] Executed DbCommand (62ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-50-10.892 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-50-10.945 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-50-10.995 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-50-11.043 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-50-11.093 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-50-11.144 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-50-11.146 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-50-11.149 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 450.1217ms
][2023-10-29 21-50-11.149 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-50-11.169 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 451 ms
][2023-10-29 21-50-11.411 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-50-11.504 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-50-11.507 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-50-11.512 -07:00 [ERR] Connection ID "18374686481282236434", Request ID "80000013-0000-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-50-11.513 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 814.7371ms
][2023-10-29 21-50-25.646 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-50-25.646 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-50-25.647 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.3510ms
][2023-10-29 21-50-25.651 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-50-25.651 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-50-25.652 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-50-25.652 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-50-25.716 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-50-25.762 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-50-25.814 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-50-25.863 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-50-25.911 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-50-25.959 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-50-26.009 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-50-26.065 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-50-26.066 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-50-26.066 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 414.6049ms
][2023-10-29 21-50-26.066 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-50-26.070 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 415 ms
][2023-10-29 21-50-26.267 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-50-26.378 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-50-26.381 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-50-26.386 -07:00 [ERR] Connection ID "18374686481282236436", Request ID "80000015-0000-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-50-26.387 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 735.2719ms
][2023-10-29 21-52-34.997 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-52-34.997 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-52-34.998 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.3881ms
][2023-10-29 21-52-35.001 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-52-35.001 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-52-35.002 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-52-35.002 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-52-35.048 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.096 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.215 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.263 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.312 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.360 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.409 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-52-35.472 -07:00 [INF] Executed DbCommand (48ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Managers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-52-35.623 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 621.0157ms
][2023-10-29 21-52-35.623 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-52-35.727 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 723 ms
][2023-10-29 21-52-35.951 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-52-35.953 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 500 - application/json 952.0453ms
][2023-10-29 21-53-24.943 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-53-24.943 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-24.944 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.7450ms
][2023-10-29 21-53-24.948 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-53-24.948 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-24.948 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-53-24.948 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-53-24.996 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.063 -07:00 [INF] Executed DbCommand (61ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.093 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-53-25.093 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-25.097 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-53-25.098 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-53-25.110 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.158 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.207 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.261 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.308 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.392 -07:00 [INF] Executed DbCommand (64ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Managers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-53-25.544 -07:00 [INF] Executed DbCommand (51ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.546 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 597.2149ms
][2023-10-29 21-53-25.546 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-53-25.650 -07:00 [INF] Executed DbCommand (48ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.652 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 701 ms
][2023-10-29 21-53-25.788 -07:00 [INF] Executed DbCommand (57ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.969 -07:00 [INF] Executed DbCommand (147ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-53-25.988 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-53-25.991 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 500 - application/json 1043.2394ms
][2023-10-29 21-53-26.041 -07:00 [INF] Executed DbCommand (69ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-53-26.089 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-53-26.136 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-53-26.189 -07:00 [INF] Executed DbCommand (47ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Managers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-53-26.355 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 1256.814ms
][2023-10-29 21-53-26.356 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-53-26.470 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 1375 ms
][2023-10-29 21-53-26.706 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-53-26.709 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 500 - application/json 1617.0916ms
][2023-10-29 21-53-30.811 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-53-30.811 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-30.811 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.2892ms
][2023-10-29 21-53-30.815 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84
][2023-10-29 21-53-30.815 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-30.815 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-53-30.815 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-53-30.860 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-53-30.905 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-53-30.950 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-53-30.994 -07:00 [INF] Executed DbCommand (41ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-53-31.042 -07:00 [INF] Executed DbCommand (45ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-53-31.093 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-53-31.144 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-53-31.190 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Trainers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-53-31.191 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-10-29 21-53-31.192 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 376.3256ms
][2023-10-29 21-53-31.192 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-53-31.195 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 376 ms
][2023-10-29 21-53-31.433 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-53-31.569 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-53-31.572 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-53-31.576 -07:00 [ERR] Connection ID "18230571301796315153", Request ID "80000012-0002-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-53-31.577 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 84 - 200 - application/json;+charset=utf-8 762.2305ms
][2023-10-29 21-53-45.071 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Trainer/members - 0
][2023-10-29 21-53-45.071 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-45.073 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Trainer/members - 0 - 204 - - 0.3926ms
][2023-10-29 21-53-45.076 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Trainer/members - -
][2023-10-29 21-53-45.076 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-53-45.202 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API)'
][2023-10-29 21-53-45.205 -07:00 [INF] Route matched with {action = "GetAllMembers", controller = "Trainer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMembersAsync() on controller Napredne_baze_podataka_API.Controllers.TrainerController (Napredne baze podataka API).
][2023-10-29 21-53-45.515 -07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
][2023-10-29 21-53-45.558 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.Models.Member, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-10-29 21-53-45.575 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API) in 369.6895ms
][2023-10-29 21-53-45.575 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.TrainerController.GetAllMembersAsync (Napredne baze podataka API)'
][2023-10-29 21-53-45.580 -07:00 [INF] Request GET /api/Trainer/members completed in 500 ms
][2023-10-29 21-53-45.772 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-53-45.901 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-10-29 21-53-45.903 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-10-29 21-53-45.908 -07:00 [ERR] Connection ID "18014398515387564056", Request ID "80000019-0001-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-10-29 21-53-45.909 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Trainer/members - - - 200 - application/json;+charset=utf-8 832.8956ms
][2023-10-29 21-58-08.388 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-10-29 21-58-08.388 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-58-08.389 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 1.3938ms
][2023-10-29 21-58-08.393 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98
][2023-10-29 21-58-08.393 -07:00 [INF] CORS policy execution successful.
][2023-10-29 21-58-08.393 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-58-08.393 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-10-29 21-58-08.456 -07:00 [INF] Executed DbCommand (51ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.515 -07:00 [INF] Executed DbCommand (57ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.580 -07:00 [INF] Executed DbCommand (62ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.625 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.670 -07:00 [INF] Executed DbCommand (43ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.715 -07:00 [INF] Executed DbCommand (42ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.762 -07:00 [INF] Executed DbCommand (44ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-10-29 21-58-08.811 -07:00 [INF] Executed DbCommand (47ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Administrators] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-10-29 21-58-08.983 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 589.6893ms
][2023-10-29 21-58-08.984 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-10-29 21-58-09.196 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 800 ms
][2023-10-29 21-58-09.447 -07:00 [ERR] Value cannot be null. (Parameter 'value')
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Napredne_baze_podataka_API.Data.Repo.LoginRepository.PostLoginDetails(UserData _userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\Repo\LoginRepository.cs:line 95
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Login_Handlers.PostLoginDetailsHandler.Handle(PostLoginDetailsCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Login Handlers\PostLoginDetailsHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails(UserData userData) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\LoginController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-10-29 21-58-09.449 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 98 - 500 - application/json 1056.7539ms
]