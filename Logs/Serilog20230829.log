[2023-08-29 10-37-35.818 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 10-37-36.194 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 10-37-36.201 -07:00 [INF] Hosting environment: Development
][2023-08-29 10-37-36.204 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 10-37-36.248 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 10-37-37.502 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 10-37-37.503 -07:00 [INF] Request GET /swagger/index.html completed in 1060 ms
][2023-08-29 10-37-37.673 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 10-37-37.810 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 301.5008ms
][2023-08-29 10-37-38.061 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-37-38.192 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 519.3042ms
][2023-08-29 10-37-38.219 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-37-38.223 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-37-38.266 -07:00 [ERR] Connection ID "17942340929939570699", Request ID "8000000c-0003-f900-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-37-38.270 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 2033.4005ms
][2023-08-29 10-37-38.353 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 10-37-38.737 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 378 ms
][2023-08-29 10-37-38.961 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-37-39.088 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-37-39.091 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-37-39.100 -07:00 [ERR] Connection ID "17942340929939570699", Request ID "8000000d-0003-f900-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-37-39.104 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 750.6248ms
][2023-08-29 10-38-14.807 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Receptionist/get-all-requests - -
][2023-08-29 10-38-15.006 -07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
][2023-08-29 10-38-15.015 -07:00 [INF] AuthenticationScheme: Bearer was challenged.
][2023-08-29 10-38-15.017 -07:00 [INF] Request GET /api/Receptionist/get-all-requests completed in 203 ms
][2023-08-29 10-38-15.025 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Receptionist/get-all-requests - - - 401 - application/json 222.1354ms
][2023-08-29 10-38-27.323 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-38-27.323 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-38-27.336 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-38-27.384 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-38-31.637 -07:00 [INF] Executed DbCommand (312ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-38-31.807 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 10-38-31.816 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4426.0101ms
][2023-08-29 10-38-31.817 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-38-31.821 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 4494 ms
][2023-08-29 10-38-32.029 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-38-32.135 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-38-32.137 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-38-32.143 -07:00 [ERR] Connection ID "17942340929939570699", Request ID "8000000f-0003-f900-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-38-32.162 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 400 - text/plain;+charset=utf-8 4838.9562ms
][2023-08-29 10-45-32.210 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 10-45-32.440 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 10-45-32.448 -07:00 [INF] Hosting environment: Development
][2023-08-29 10-45-32.451 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 10-45-32.470 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 10-45-33.048 -07:00 [INF] Request GET /swagger/index.html completed in 515 ms
][2023-08-29 10-45-33.186 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 10-45-33.188 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 10-45-33.272 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 81.3700ms
][2023-08-29 10-45-33.343 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 154.7473ms
][2023-08-29 10-45-33.366 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-45-33.451 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-45-33.454 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-45-33.483 -07:00 [ERR] Connection ID "18158513699168452669", Request ID "8000003e-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-45-33.487 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1022.2052ms
][2023-08-29 10-45-33.539 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 10-45-33.778 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 235 ms
][2023-08-29 10-45-33.850 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-45-33.880 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-45-33.883 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-45-33.887 -07:00 [ERR] Connection ID "18158513699168452669", Request ID "8000003f-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-45-33.890 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 351.2976ms
][2023-08-29 10-45-42.265 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-45-42.266 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-45-42.410 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-45-42.454 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-45-46.303 -07:00 [INF] Executed DbCommand (316ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-45-46.550 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-08-29 10-45-46.575 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4114.3228ms
][2023-08-29 10-45-46.577 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-45-46.581 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 4312 ms
][2023-08-29 10-45-46.824 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-45-46.937 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-45-46.940 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-45-46.945 -07:00 [ERR] Connection ID "18158513699168452669", Request ID "80000040-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-45-46.967 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 200 - application/json;+charset=utf-8 4702.4915ms
][2023-08-29 10-47-44.194 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 10-47-44.406 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 10-47-44.410 -07:00 [INF] Hosting environment: Development
][2023-08-29 10-47-44.411 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 10-47-44.431 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 10-47-45.049 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 10-47-45.075 -07:00 [INF] Request GET /swagger/index.html completed in 543 ms
][2023-08-29 10-47-45.164 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 10-47-45.285 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 116.5603ms
][2023-08-29 10-47-45.363 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 313.7116ms
][2023-08-29 10-47-45.369 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-47-45.458 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-47-45.461 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-47-45.486 -07:00 [ERR] Connection ID "18158513703463419915", Request ID "8000000c-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-47-45.490 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1064.9069ms
][2023-08-29 10-47-45.532 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 10-47-45.756 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 221 ms
][2023-08-29 10-47-45.841 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-47-45.870 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-47-45.873 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-47-45.877 -07:00 [ERR] Connection ID "18158513703463419915", Request ID "8000000d-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-47-45.880 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 347.5646ms
][2023-08-29 10-47-52.611 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-47-52.612 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-47-52.749 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-47-52.793 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-47-56.755 -07:00 [INF] Executed DbCommand (314ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-47-57.614 -07:00 [INF] Executed DbCommand (172ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
][2023-08-29 10-47-57.921 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1356faca-9497-4abf-bb5b-13b0f4c48a1b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1356faca-9497-4abf-bb5b-13b0f4c48a1b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-08-29 10-47-58.206 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 5404.4655ms
][2023-08-29 10-47-58.208 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-47-58.385 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 5768 ms
][2023-08-29 10-47-58.757 -07:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:1356faca-9497-4abf-bb5b-13b0f4c48a1b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.UnitOfWork.SaveAsync() in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\UnitOfWork.cs:line 41
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Receptionist_Handlers.ApproveRegistrationRequestHandler.Handle(ApproveRegistrationRequestCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Receptionist Handlers\ApproveRegistrationRequestHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest(Int32 requestId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\ReceptionistController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-47-58.979 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 500 - application/json 6368.6103ms
][2023-08-29 10-49-18.581 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 10-49-18.792 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 10-49-18.799 -07:00 [INF] Hosting environment: Development
][2023-08-29 10-49-18.801 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 10-49-18.818 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 10-49-19.442 -07:00 [INF] Request GET /swagger/index.html completed in 535 ms
][2023-08-29 10-49-19.610 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 10-49-19.610 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 10-49-19.703 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 86.1140ms
][2023-08-29 10-49-19.809 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-49-19.810 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 200.2016ms
][2023-08-29 10-49-19.898 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-49-19.901 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-49-19.936 -07:00 [ERR] Connection ID "18014398519682531341", Request ID "8000000e-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-49-19.940 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1127.3927ms
][2023-08-29 10-49-19.983 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 10-49-20.225 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 239 ms
][2023-08-29 10-49-20.299 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-49-20.326 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-49-20.331 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-49-20.335 -07:00 [ERR] Connection ID "18014398519682531341", Request ID "8000000f-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-49-20.338 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 355.2742ms
][2023-08-29 10-49-27.423 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-49-27.424 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-49-27.561 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-49-27.603 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-49-31.520 -07:00 [INF] Executed DbCommand (273ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-49-31.763 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-08-29 10-49-31.787 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4178.1487ms
][2023-08-29 10-49-31.788 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-49-31.792 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 4365 ms
][2023-08-29 10-49-32.024 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-49-32.143 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-49-32.147 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-49-32.151 -07:00 [ERR] Connection ID "18014398519682531341", Request ID "80000010-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-49-32.170 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 200 - application/json;+charset=utf-8 4747.0677ms
][2023-08-29 10-56-15.857 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 10-56-16.067 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 10-56-16.073 -07:00 [INF] Hosting environment: Development
][2023-08-29 10-56-16.075 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 10-56-16.094 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 10-56-16.740 -07:00 [INF] Request GET /swagger/index.html completed in 571 ms
][2023-08-29 10-56-16.743 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 10-56-16.743 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 10-56-17.062 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 315.3326ms
][2023-08-29 10-56-17.158 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 414.9290ms
][2023-08-29 10-56-17.202 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-56-17.335 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-56-17.339 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-56-17.374 -07:00 [ERR] Connection ID "18014398511092596744", Request ID "80000009-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-56-17.378 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1289.4735ms
][2023-08-29 10-56-17.510 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 10-56-17.782 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 265 ms
][2023-08-29 10-56-17.858 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-56-17.896 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 10-56-17.901 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 10-56-17.907 -07:00 [ERR] Connection ID "18014398511092596744", Request ID "8000000a-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 10-56-17.912 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 402.2019ms
][2023-08-29 10-56-27.834 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-56-27.835 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-56-27.973 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-56-28.017 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-56-32.176 -07:00 [INF] Executed DbCommand (467ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-56-33.212 -07:00 [INF] Executed DbCommand (172ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
][2023-08-29 10-56-33.462 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-08-29 10-56-33.718 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 5691.8575ms
][2023-08-29 10-56-33.721 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-56-33.893 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 6053 ms
][2023-08-29 10-56-34.229 -07:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.UnitOfWork.SaveAsync() in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\UnitOfWork.cs:line 41
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Receptionist_Handlers.ApproveRegistrationRequestHandler.Handle(ApproveRegistrationRequestCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Receptionist Handlers\ApproveRegistrationRequestHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest(Int32 requestId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\ReceptionistController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-56-34.410 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 500 - application/json 6575.5365ms
][2023-08-29 10-58-34.496 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-58-34.502 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-58-34.513 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-58-34.518 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-58-34.743 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-58-35.097 -07:00 [INF] Executed DbCommand (170ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
][2023-08-29 10-58-35.372 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-08-29 10-58-35.633 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 1114.6941ms
][2023-08-29 10-58-35.633 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-58-35.799 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 1294 ms
][2023-08-29 10-58-36.148 -07:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.UnitOfWork.SaveAsync() in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\UnitOfWork.cs:line 41
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Receptionist_Handlers.ApproveRegistrationRequestHandler.Handle(ApproveRegistrationRequestCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Receptionist Handlers\ApproveRegistrationRequestHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest(Int32 requestId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\ReceptionistController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-58-36.152 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 500 - application/json 1655.5577ms
][2023-08-29 10-58-45.746 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 10-58-45.746 -07:00 [INF] CORS policy execution successful.
][2023-08-29 10-58-45.748 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-58-45.749 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 10-58-45.979 -07:00 [INF] Executed DbCommand (171ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 10-58-46.636 -07:00 [INF] Executed DbCommand (177ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
][2023-08-29 10-58-47.228 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-08-29 10-58-47.455 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 1706.6265ms
][2023-08-29 10-58-47.456 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 10-58-47.587 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 1837 ms
][2023-08-29 10-58-47.927 -07:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a4dcffc4-0752-4157-864a-fddc93bfd7c8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.UnitOfWork.SaveAsync() in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\UnitOfWork.cs:line 41
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Receptionist_Handlers.ApproveRegistrationRequestHandler.Handle(ApproveRegistrationRequestCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Receptionist Handlers\ApproveRegistrationRequestHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest(Int32 requestId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\ReceptionistController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 10-58-47.932 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 500 - application/json 2186.2915ms
][2023-08-29 11-03-31.554 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-03-31.763 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-03-31.767 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-03-31.770 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-03-31.788 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-03-32.810 -07:00 [INF] Request GET /swagger/index.html completed in 905 ms
][2023-08-29 11-03-32.946 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-03-32.946 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-03-33.030 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 78.7490ms
][2023-08-29 11-03-33.101 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-03-33.189 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 243.1918ms
][2023-08-29 11-03-33.207 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-03-33.210 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-03-33.234 -07:00 [ERR] Connection ID "18014398511092596750", Request ID "8000000f-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-03-33.238 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1456.3326ms
][2023-08-29 11-03-33.277 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-03-33.491 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 211 ms
][2023-08-29 11-03-33.570 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-03-33.604 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-03-33.608 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-03-33.613 -07:00 [ERR] Connection ID "18014398511092596750", Request ID "80000010-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-03-33.616 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 339.3145ms
][2023-08-29 11-03-48.537 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 11-03-48.538 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-03-48.681 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-03-48.728 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-03-52.545 -07:00 [INF] Executed DbCommand (312ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-03-52.831 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-03-52.842 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4106.8638ms
][2023-08-29 11-03-52.844 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-03-52.848 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 4305 ms
][2023-08-29 11-03-53.062 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-03-53.154 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-03-53.157 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-03-53.161 -07:00 [ERR] Connection ID "18014398511092596750", Request ID "80000011-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-03-53.188 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 400 - text/plain;+charset=utf-8 4651.7216ms
][2023-08-29 11-08-07.827 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-08-08.035 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-08-08.039 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-08-08.041 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-08-08.060 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-08-08.662 -07:00 [INF] Request GET /swagger/index.html completed in 537 ms
][2023-08-29 11-08-08.780 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-08-08.785 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-08-08.889 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 104.4757ms
][2023-08-29 11-08-08.948 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-08-09.033 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 248.1284ms
][2023-08-29 11-08-09.053 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-08-09.056 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-08-09.081 -07:00 [ERR] Connection ID "18014398519682531349", Request ID "80000016-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-08-09.085 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1029.6373ms
][2023-08-29 11-08-09.126 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-08-09.356 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 227 ms
][2023-08-29 11-08-09.491 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-08-09.521 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-08-09.524 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-08-09.529 -07:00 [ERR] Connection ID "18014398519682531349", Request ID "80000017-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-08-09.532 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 405.3492ms
][2023-08-29 11-08-17.567 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 11-08-17.568 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-08-17.708 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-08-17.754 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-08-21.808 -07:00 [INF] Executed DbCommand (396ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-08-22.815 -07:00 [INF] Executed DbCommand (180ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
][2023-08-29 11-08-23.135 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4aac8ec-8d75-4bc2-9f6b-22e2b4b86806
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4aac8ec-8d75-4bc2-9f6b-22e2b4b86806
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-08-29 11-08-23.497 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 5733.869ms
][2023-08-29 11-08-23.499 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-08-23.734 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 6161 ms
][2023-08-29 11-08-24.148 -07:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4aac8ec-8d75-4bc2-9f6b-22e2b4b86806
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.UnitOfWork.SaveAsync() in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\UnitOfWork.cs:line 41
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Receptionist_Handlers.ApproveRegistrationRequestHandler.Handle(ApproveRegistrationRequestCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Receptionist Handlers\ApproveRegistrationRequestHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest(Int32 requestId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\ReceptionistController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-08-24.337 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 500 - application/json 6769.6923ms
][2023-08-29 11-09-10.881 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-09-11.093 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-09-11.104 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-09-11.106 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-09-11.131 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-09-11.748 -07:00 [INF] Request GET /swagger/index.html completed in 538 ms
][2023-08-29 11-09-11.915 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-09-11.915 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-09-12.027 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 104.6593ms
][2023-08-29 11-09-12.094 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 178.9669ms
][2023-08-29 11-09-12.106 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-09-12.212 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-09-12.215 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-09-12.245 -07:00 [ERR] Connection ID "17870283331606675459", Request ID "80000004-0002-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-09-12.250 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1127.7955ms
][2023-08-29 11-09-12.297 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-09-12.559 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 258 ms
][2023-08-29 11-09-12.651 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-09-12.681 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-09-12.684 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-09-12.689 -07:00 [ERR] Connection ID "17870283331606675459", Request ID "80000005-0002-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-09-12.696 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 399.8729ms
][2023-08-29 11-09-18.564 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 11-09-18.566 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-09-18.694 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-09-18.734 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-09-22.588 -07:00 [INF] Executed DbCommand (269ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-09-23.165 -07:00 [INF] Executed DbCommand (183ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
][2023-08-29 11-09-23.372 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:861e1b73-670a-49e7-8adb-4ed958dd67ff
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:861e1b73-670a-49e7-8adb-4ed958dd67ff
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
][2023-08-29 11-09-23.482 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-09-23.492 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4750.4825ms
][2023-08-29 11-09-23.493 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-09-23.497 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 4927 ms
][2023-08-29 11-09-23.703 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-09-23.817 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-09-23.819 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-09-23.825 -07:00 [ERR] Connection ID "17870283331606675459", Request ID "80000006-0002-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-09-23.846 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 400 - text/plain;+charset=utf-8 5281.9528ms
][2023-08-29 11-13-46.535 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-13-46.739 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-13-46.744 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-13-46.746 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-13-46.769 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-13-47.385 -07:00 [INF] Request GET /swagger/index.html completed in 525 ms
][2023-08-29 11-13-47.386 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-13-47.509 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-13-47.624 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 233.2443ms
][2023-08-29 11-13-47.708 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-13-47.748 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 239.5277ms
][2023-08-29 11-13-47.798 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-13-47.801 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-13-47.827 -07:00 [ERR] Connection ID "17870283331606675463", Request ID "80000008-0002-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-13-47.831 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1068.6181ms
][2023-08-29 11-13-47.874 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-13-48.119 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 242 ms
][2023-08-29 11-13-48.197 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-13-48.228 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-13-48.232 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-13-48.236 -07:00 [ERR] Connection ID "17870283331606675463", Request ID "80000009-0002-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-13-48.239 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 365.5228ms
][2023-08-29 11-14-09.776 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 11-14-09.784 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-14-09.914 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-14-09.955 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-14-13.809 -07:00 [INF] Executed DbCommand (280ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-14-14.677 -07:00 [INF] Executed DbCommand (172ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Sponsors] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
][2023-08-29 11-14-15.012 -07:00 [ERR] An exception occurred in the database while saving changes for context type 'Napredne_baze_podataka_API.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8ff63001-fdfa-44ce-96fc-1b7d794c7fa4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8ff63001-fdfa-44ce-96fc-1b7d794c7fa4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-08-29 11-14-15.308 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 5344.7918ms
][2023-08-29 11-14-15.310 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-14-15.508 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 5719 ms
][2023-08-29 11-14-15.849 -07:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Role', table 'db_a9d5c3_napredne.dbo.Sponsors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8ff63001-fdfa-44ce-96fc-1b7d794c7fa4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Napredne_baze_podataka_API.Data.UnitOfWork.SaveAsync() in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Data\UnitOfWork.cs:line 41
   at Napredne_baze_podataka_API.Mediator_Pattern.Handlers.Receptionist_Handlers.ApproveRegistrationRequestHandler.Handle(ApproveRegistrationRequestCommand request, CancellationToken cancellationToken) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Mediator Pattern\Handlers\Receptionist Handlers\ApproveRegistrationRequestHandler.cs:line 22
   at Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest(Int32 requestId) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Controllers\ReceptionistController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Napredne_baze_podataka_API.Middleware.RequestLoggingMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\RequestLoggingMiddleware.cs:line 27
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 22
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-14-16.030 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 500 - application/json 6253.9286ms
][2023-08-29 11-16-16.836 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-16-17.042 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-16-17.048 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-16-17.050 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-16-17.082 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-16-17.836 -07:00 [INF] Request GET /swagger/index.html completed in 653 ms
][2023-08-29 11-16-17.838 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-16-17.933 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-16-18.075 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 228.2810ms
][2023-08-29 11-16-18.147 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-16-18.248 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 314.6717ms
][2023-08-29 11-16-18.264 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-16-18.267 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-16-18.292 -07:00 [ERR] Connection ID "18158513703463419931", Request ID "8000001c-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-16-18.298 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1225.8940ms
][2023-08-29 11-16-18.383 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-16-18.648 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 262 ms
][2023-08-29 11-16-18.722 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-16-18.752 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-16-18.754 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-16-18.759 -07:00 [ERR] Connection ID "18158513703463419931", Request ID "8000001d-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-16-18.763 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 379.7493ms
][2023-08-29 11-16-26.815 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 11-16-26.816 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-16-26.935 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-16-26.977 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-16-31.345 -07:00 [INF] Executed DbCommand (292ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-16-31.598 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-16-31.608 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4624.0432ms
][2023-08-29 11-16-31.610 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-16-31.615 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 4793 ms
][2023-08-29 11-16-31.827 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-16-31.926 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-16-31.929 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-16-31.934 -07:00 [ERR] Connection ID "18158513703463419931", Request ID "8000001e-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-16-31.970 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 400 - text/plain;+charset=utf-8 5155.0313ms
][2023-08-29 11-18-24.305 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-18-24.525 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-18-24.530 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-18-24.532 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-18-24.548 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-18-25.150 -07:00 [INF] Request GET /swagger/index.html completed in 525 ms
][2023-08-29 11-18-25.155 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-18-25.292 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-18-25.376 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 217.3902ms
][2023-08-29 11-18-25.450 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-18-25.524 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 231.6481ms
][2023-08-29 11-18-25.541 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-18-25.544 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-18-25.573 -07:00 [ERR] Connection ID "17870283335901642772", Request ID "80000015-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-18-25.579 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1035.6249ms
][2023-08-29 11-18-25.629 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-18-25.871 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 236 ms
][2023-08-29 11-18-25.950 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-18-25.978 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-18-25.981 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-18-25.987 -07:00 [ERR] Connection ID "17870283335901642772", Request ID "80000016-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-18-25.989 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 360.9260ms
][2023-08-29 11-18-31.639 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0
][2023-08-29 11-18-31.641 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-18-31.771 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-18-31.813 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-18-35.585 -07:00 [INF] Executed DbCommand (289ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-18-36.443 -07:00 [INF] Executed DbCommand (180ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Members] ([AccessToken], [BirthDate], [Email], [FirstName], [LastName], [Password], [PhoneNumber], [RefreshToken], [RegistrationDate], [Role], [SelectedTrainerId], [UserName])
OUTPUT INSERTED.[ID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
DELETE FROM [RegistrationRequests]
OUTPUT 1
WHERE [Id] = @p12;
][2023-08-29 11-18-36.734 -07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
][2023-08-29 11-18-36.762 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4943.7148ms
][2023-08-29 11-18-36.764 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-18-36.768 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/4 completed in 5123 ms
][2023-08-29 11-18-37.058 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-18-37.188 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-18-37.191 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-18-37.196 -07:00 [ERR] Connection ID "17870283335901642772", Request ID "80000017-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-18-37.216 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/4 - 0 - 200 - application/json;+charset=utf-8 5576.8221ms
][2023-08-29 11-22-55.917 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-22-56.118 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-22-56.123 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-22-56.125 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-22-56.145 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-22-56.879 -07:00 [INF] Request GET /swagger/index.html completed in 638 ms
][2023-08-29 11-22-56.883 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-22-56.883 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-22-57.213 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 323.4174ms
][2023-08-29 11-22-57.284 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 400.9609ms
][2023-08-29 11-22-57.311 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-22-57.439 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-22-57.443 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-22-57.470 -07:00 [ERR] Connection ID "18158513703463419937", Request ID "80000022-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-22-57.474 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1334.6868ms
][2023-08-29 11-22-57.525 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-22-57.783 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 253 ms
][2023-08-29 11-22-57.868 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-22-57.894 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-22-57.897 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-22-57.902 -07:00 [ERR] Connection ID "18158513703463419937", Request ID "80000023-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-22-57.905 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 379.9830ms
][2023-08-29 11-23-08.065 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-23-08.066 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-23-08.200 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-23-08.241 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-23-12.013 -07:00 [INF] Executed DbCommand (275ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-23-12.327 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-23-12.339 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 4090.291ms
][2023-08-29 11-23-12.340 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-23-12.344 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 4274 ms
][2023-08-29 11-23-12.575 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-23-12.682 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-23-12.685 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-23-12.691 -07:00 [ERR] Connection ID "18158513703463419937", Request ID "80000024-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-23-12.710 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 4645.2556ms
][2023-08-29 11-27-21.892 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-27-22.154 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-27-22.162 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-27-22.164 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-27-22.189 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-27-23.128 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-27-23.157 -07:00 [INF] Request GET /swagger/index.html completed in 846 ms
][2023-08-29 11-27-23.158 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-27-23.464 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 296.4611ms
][2023-08-29 11-27-23.601 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 472.7722ms
][2023-08-29 11-27-23.638 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-27-23.808 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-27-23.821 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-27-23.888 -07:00 [ERR] Connection ID "17870283335901642777", Request ID "8000001a-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-27-23.896 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1714.3637ms
][2023-08-29 11-27-23.969 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-27-24.450 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 474 ms
][2023-08-29 11-27-24.615 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-27-24.712 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-27-24.721 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-27-24.731 -07:00 [ERR] Connection ID "17870283335901642777", Request ID "8000001b-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-27-24.736 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 767.2702ms
][2023-08-29 11-27-32.305 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-27-32.308 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-27-32.611 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-27-32.748 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-27-41.671 -07:00 [INF] Executed DbCommand (746ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-27-42.353 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-27-42.376 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 9612.7023ms
][2023-08-29 11-27-42.379 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-27-42.387 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 10073 ms
][2023-08-29 11-27-42.934 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-27-43.198 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-27-43.203 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-27-43.213 -07:00 [ERR] Connection ID "17870283335901642777", Request ID "8000001c-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-27-43.251 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 10945.6431ms
][2023-08-29 11-28-47.205 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-28-47.702 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-28-47.712 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-28-47.716 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-28-47.781 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-28-49.275 -07:00 [INF] Request GET /swagger/index.html completed in 1333 ms
][2023-08-29 11-28-49.288 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-28-49.291 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-28-49.740 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 418.0352ms
][2023-08-29 11-28-49.892 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-28-50.042 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 750.7687ms
][2023-08-29 11-28-50.078 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-28-50.083 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-28-50.139 -07:00 [ERR] Connection ID "18230571293206380713", Request ID "800000aa-0000-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-28-50.149 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 2391.8130ms
][2023-08-29 11-28-50.260 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-28-50.699 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 434 ms
][2023-08-29 11-28-50.892 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-28-50.950 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-28-50.954 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-28-50.963 -07:00 [ERR] Connection ID "18230571293206380713", Request ID "800000ab-0000-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-28-50.967 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 706.6040ms
][2023-08-29 11-28-57.572 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-28-57.574 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-28-57.858 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-28-57.965 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-29-07.035 -07:00 [INF] Executed DbCommand (639ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-29-07.691 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-29-07.723 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 9734.48ms
][2023-08-29 11-29-07.729 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-29-07.738 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 10158 ms
][2023-08-29 11-29-08.277 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-29-08.534 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-29-08.539 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-29-08.550 -07:00 [ERR] Connection ID "18230571293206380713", Request ID "800000ac-0000-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-29-08.603 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 11030.4413ms
][2023-08-29 11-30-16.343 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-30-16.944 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-30-16.957 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-30-16.961 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-30-17.028 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-30-18.820 -07:00 [INF] Request GET /swagger/index.html completed in 1579 ms
][2023-08-29 11-30-18.829 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-30-18.995 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-30-19.375 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 533.7722ms
][2023-08-29 11-30-19.601 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-30-19.602 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 772.8212ms
][2023-08-29 11-30-19.864 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-30-19.869 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-30-19.926 -07:00 [ERR] Connection ID "18302628891539275892", Request ID "80000075-0001-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-30-19.932 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 2925.7171ms
][2023-08-29 11-30-20.010 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-30-20.497 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 482 ms
][2023-08-29 11-30-20.696 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-30-20.772 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-30-20.782 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-30-20.796 -07:00 [ERR] Connection ID "18302628891539275892", Request ID "80000076-0001-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-30-20.804 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 793.5575ms
][2023-08-29 11-30-28.262 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-30-28.264 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-30-28.562 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-30-28.723 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-30-38.113 -07:00 [INF] Executed DbCommand (758ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-30-38.788 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-30-38.818 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 10074.1888ms
][2023-08-29 11-30-38.821 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-30-38.830 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 10558 ms
][2023-08-29 11-30-39.354 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-30-39.637 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-30-39.644 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-30-39.653 -07:00 [ERR] Connection ID "18302628891539275892", Request ID "80000077-0001-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-30-39.701 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 11438.4684ms
][2023-08-29 11-31-33.358 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-31-33.686 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-31-33.696 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-31-33.701 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-31-33.742 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-31-34.918 -07:00 [INF] Request GET /swagger/index.html completed in 1020 ms
][2023-08-29 11-31-34.919 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-31-35.003 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-31-35.246 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 317.0632ms
][2023-08-29 11-31-35.373 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 370.1894ms
][2023-08-29 11-31-35.389 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-31-35.547 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-31-35.553 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-31-35.605 -07:00 [ERR] Connection ID "18374686485577203874", Request ID "800000a3-0001-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-31-35.613 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 1886.3727ms
][2023-08-29 11-31-35.726 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-31-36.132 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 398 ms
][2023-08-29 11-31-36.277 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-31-36.354 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-31-36.360 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-31-36.373 -07:00 [ERR] Connection ID "18374686485577203874", Request ID "800000a4-0001-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-31-36.386 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 659.1239ms
][2023-08-29 11-31-43.574 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-31-43.575 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-31-43.842 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-31-43.974 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-31-52.432 -07:00 [INF] Executed DbCommand (538ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-31-53.115 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-31-53.146 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 9149.196ms
][2023-08-29 11-31-53.152 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-31-53.170 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 9586 ms
][2023-08-29 11-31-53.725 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-31-54.068 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-31-54.075 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-31-54.087 -07:00 [ERR] Connection ID "18374686485577203874", Request ID "800000a5-0001-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-31-54.138 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 10564.8620ms
][2023-08-29 11-32-56.421 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-32-56.897 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-32-56.909 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-32-56.913 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-32-56.955 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-32-58.434 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-32-58.452 -07:00 [INF] Request GET /swagger/index.html completed in 1325 ms
][2023-08-29 11-32-58.452 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-32-58.944 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 472.9800ms
][2023-08-29 11-32-59.098 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-32-59.215 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 781.2706ms
][2023-08-29 11-32-59.277 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-32-59.289 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-32-59.353 -07:00 [ERR] Connection ID "18158513699168452692", Request ID "80000055-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-32-59.365 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 2422.7022ms
][2023-08-29 11-32-59.466 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-32-59.917 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 445 ms
][2023-08-29 11-33-00.139 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-33-00.194 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-33-00.200 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-33-00.210 -07:00 [ERR] Connection ID "18158513699168452692", Request ID "80000056-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-33-00.215 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 749.3501ms
][2023-08-29 11-33-09.087 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-33-09.088 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-33-09.359 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-33-09.555 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-33-17.924 -07:00 [INF] Executed DbCommand (577ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-33-18.662 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-33-18.690 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 9114.8718ms
][2023-08-29 11-33-18.694 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-33-18.703 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 9608 ms
][2023-08-29 11-33-19.191 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-33-19.409 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-33-19.415 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-33-19.424 -07:00 [ERR] Connection ID "18158513699168452692", Request ID "80000057-0000-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-33-19.464 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 10377.9255ms
][2023-08-29 11-36-40.415 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-36-40.865 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-36-40.876 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-36-40.879 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-36-40.928 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-36-42.459 -07:00 [INF] Request GET /swagger/index.html completed in 1336 ms
][2023-08-29 11-36-42.459 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-36-42.461 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-36-42.899 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 425.5015ms
][2023-08-29 11-36-43.062 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-36-43.242 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 783.2871ms
][2023-08-29 11-36-43.279 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-36-43.285 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-36-43.347 -07:00 [ERR] Connection ID "17870283335901642782", Request ID "8000001f-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-36-43.356 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 2444.4858ms
][2023-08-29 11-36-43.433 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-36-43.841 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 399 ms
][2023-08-29 11-36-44.021 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-36-44.137 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-36-44.143 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-36-44.149 -07:00 [ERR] Connection ID "17870283335901642782", Request ID "80000020-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-36-44.153 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 720.7730ms
][2023-08-29 11-36-50.771 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0
][2023-08-29 11-36-50.773 -07:00 [INF] CORS policy execution successful.
][2023-08-29 11-36-51.140 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-36-51.305 -07:00 [INF] Route matched with {action = "ApproveRegistrationRequest", controller = "Receptionist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveRegistrationRequest(Int32) on controller Napredne_baze_podataka_API.Controllers.ReceptionistController (Napredne baze podataka API).
][2023-08-29 11-37-01.364 -07:00 [INF] Executed DbCommand (595ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[Role], [r].[UserName]
FROM [RegistrationRequests] AS [r]
WHERE [r].[Id] = @__p_0
][2023-08-29 11-37-02.107 -07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
][2023-08-29 11-37-02.133 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API) in 10809.3418ms
][2023-08-29 11-37-02.136 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.ReceptionistController.ApproveRegistrationRequest (Napredne baze podataka API)'
][2023-08-29 11-37-02.147 -07:00 [INF] Request POST /api/Receptionist/approve-registration-request/5 completed in 11367 ms
][2023-08-29 11-37-02.684 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-37-02.913 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-37-02.919 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-37-02.931 -07:00 [ERR] Connection ID "17870283335901642782", Request ID "80000021-0003-f800-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-37-02.994 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Receptionist/approve-registration-request/5 - 0 - 400 - text/plain;+charset=utf-8 12223.0874ms
][2023-08-29 11-55-54.096 -07:00 [INF] User profile is available. Using 'C:\Users\Belkisa\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-08-29 11-55-54.571 -07:00 [INF] Application started. Press Ctrl+C to shut down.
][2023-08-29 11-55-54.585 -07:00 [INF] Hosting environment: Development
][2023-08-29 11-55-54.591 -07:00 [INF] Content root path: C:\Users\Belkisa\source\repos\Napredne baze podataka API\
][2023-08-29 11-55-54.648 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/index.html - -
][2023-08-29 11-55-56.151 -07:00 [INF] Request GET /swagger/index.html completed in 1388 ms
][2023-08-29 11-55-56.442 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_vs/browserLink - -
][2023-08-29 11-55-56.442 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - -
][2023-08-29 11-55-56.702 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_framework/aspnetcore-browser-refresh.js - - - 200 12022 application/javascript;+charset=utf-8 236.6216ms
][2023-08-29 11-55-56.869 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-55-57.042 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 600.1639ms
][2023-08-29 11-55-57.093 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-55-57.099 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-55-57.159 -07:00 [ERR] Connection ID "18014398511092596774", Request ID "80000027-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.ExecuteWithFilterAsync(IHttpSocketAdapter injectScriptSocket, String requestId, HttpContext httpContext)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-55-57.167 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/index.html - - - 200 - text/html;charset=utf-8 2540.0044ms
][2023-08-29 11-55-57.290 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - -
][2023-08-29 11-55-57.773 -07:00 [INF] Request GET /swagger/v1/swagger.json completed in 477 ms
][2023-08-29 11-55-57.945 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 11-55-58.002 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 11-55-58.009 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 11-55-58.017 -07:00 [ERR] Connection ID "18014398511092596774", Request ID "80000028-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 11-55-58.023 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 733.8208ms
][2023-08-29 12-01-43.726 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 112
][2023-08-29 12-01-43.734 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-01-44.020 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-01-44.160 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-08-29 12-01-52.009 -07:00 [INF] Executed DbCommand (414ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-08-29 12-01-52.469 -07:00 [INF] Executed DbCommand (180ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-01-52.752 -07:00 [INF] Executed DbCommand (173ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-01-52.985 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-08-29 12-01-53.209 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-01-53.854 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-01-54.077 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-08-29 12-01-55.022 -07:00 [INF] Executed DbCommand (346ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Sellers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-08-29 12-01-55.635 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-08-29 12-01-55.726 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 11546.5083ms
][2023-08-29 12-01-55.731 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-01-55.739 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 11998 ms
][2023-08-29 12-01-56.297 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-01-56.552 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-01-56.558 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-01-56.568 -07:00 [ERR] Connection ID "18158513703463419955", Request ID "80000034-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-01-56.640 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 112 - 200 - application/json;+charset=utf-8 12914.3057ms
][2023-08-29 12-07-01.031 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-08-29 12-07-01.031 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-01.035 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 4.0185ms
][2023-08-29 12-07-01.050 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83
][2023-08-29 12-07-01.050 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-01.057 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-07-01.063 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-08-29 12-07-01.280 -07:00 [INF] Executed DbCommand (170ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-08-29 12-07-01.458 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-07-01.639 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-07-01.810 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-08-29 12-07-01.983 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-07-02.160 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-07-02.337 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-08-29 12-07-02.512 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Sellers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-08-29 12-07-02.514 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-08-29 12-07-02.515 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 1451.3118ms
][2023-08-29 12-07-02.515 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-07-02.519 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 1464 ms
][2023-08-29 12-07-02.943 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-07-03.248 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-07-03.253 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-07-03.262 -07:00 [ERR] Connection ID "18014398511092596781", Request ID "8000002e-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-07-03.264 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83 - 200 - application/json;+charset=utf-8 2213.3676ms
][2023-08-29 12-07-03.308 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Seller/list-products - 0
][2023-08-29 12-07-03.308 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-03.308 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Seller/list-products - 0 - 204 - - 0.9632ms
][2023-08-29 12-07-03.328 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Seller/list-products - -
][2023-08-29 12-07-03.328 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-03.651 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API)'
][2023-08-29 12-07-03.655 -07:00 [INF] Route matched with {action = "ListProducts", controller = "Seller"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListProducts() on controller Napredne_baze_podataka_API.Controllers.SellerController (Napredne baze podataka API).
][2023-08-29 12-07-03.953 -07:00 [INF] Executed DbCommand (172ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[IsMain], [p].[Name], [p].[Price], [p].[PublicId], [p].[SellerId], [p].[Type], [p].[Url]
FROM [Products] AS [p]
][2023-08-29 12-07-04.062 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.Models.Product, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-07-04.071 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API) in 415.4369ms
][2023-08-29 12-07-04.071 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API)'
][2023-08-29 12-07-04.079 -07:00 [INF] Request GET /api/Seller/list-products completed in 746 ms
][2023-08-29 12-07-04.591 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-07-04.803 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-07-04.809 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-07-04.817 -07:00 [ERR] Connection ID "18230571306091282458", Request ID "8000001b-0003-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-07-04.818 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Seller/list-products - - - 200 - application/json;+charset=utf-8 1489.5199ms
][2023-08-29 12-07-19.475 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-08-29 12-07-19.475 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-19.475 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.4506ms
][2023-08-29 12-07-19.480 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83
][2023-08-29 12-07-19.480 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-19.480 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-07-19.480 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-08-29 12-07-19.662 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-08-29 12-07-19.834 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-07-20.008 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-07-20.181 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-08-29 12-07-20.354 -07:00 [INF] Executed DbCommand (166ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-07-20.529 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-07-20.704 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-08-29 12-07-21.021 -07:00 [INF] Executed DbCommand (286ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Sellers] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-08-29 12-07-21.024 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-08-29 12-07-21.070 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 1590.098ms
][2023-08-29 12-07-21.070 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-07-21.096 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 1590 ms
][2023-08-29 12-07-21.714 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-07-21.962 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-07-21.968 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-07-21.976 -07:00 [ERR] Connection ID "18014398511092596785", Request ID "80000032-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-07-21.978 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 83 - 200 - application/json;+charset=utf-8 2497.8468ms
][2023-08-29 12-07-22.032 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Seller/list-products - 0
][2023-08-29 12-07-22.033 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-22.033 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Seller/list-products - 0 - 204 - - 0.5789ms
][2023-08-29 12-07-22.042 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Seller/list-products - -
][2023-08-29 12-07-22.042 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-22.046 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API)'
][2023-08-29 12-07-22.046 -07:00 [INF] Route matched with {action = "ListProducts", controller = "Seller"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListProducts() on controller Napredne_baze_podataka_API.Controllers.SellerController (Napredne baze podataka API).
][2023-08-29 12-07-22.234 -07:00 [INF] Executed DbCommand (171ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[IsMain], [p].[Name], [p].[Price], [p].[PublicId], [p].[SellerId], [p].[Type], [p].[Url]
FROM [Products] AS [p]
][2023-08-29 12-07-22.236 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.Models.Product, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-07-22.241 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API) in 194.3178ms
][2023-08-29 12-07-22.242 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API)'
][2023-08-29 12-07-22.258 -07:00 [INF] Request GET /api/Seller/list-products completed in 199 ms
][2023-08-29 12-07-22.797 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-07-23.333 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-07-23.383 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-07-23.398 -07:00 [ERR] Connection ID "18014398519682531375", Request ID "80000030-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-07-23.400 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Seller/list-products - - - 200 - application/json;+charset=utf-8 1357.5949ms
][2023-08-29 12-07-36.285 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Seller/list-products - 0
][2023-08-29 12-07-36.285 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-36.285 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Seller/list-products - 0 - 204 - - 0.5393ms
][2023-08-29 12-07-36.295 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Seller/list-products - -
][2023-08-29 12-07-36.295 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-36.297 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API)'
][2023-08-29 12-07-36.297 -07:00 [INF] Route matched with {action = "ListProducts", controller = "Seller"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListProducts() on controller Napredne_baze_podataka_API.Controllers.SellerController (Napredne baze podataka API).
][2023-08-29 12-07-36.482 -07:00 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[IsMain], [p].[Name], [p].[Price], [p].[PublicId], [p].[SellerId], [p].[Type], [p].[Url]
FROM [Products] AS [p]
][2023-08-29 12-07-36.483 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.Models.Product, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-07-36.485 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API) in 188.3348ms
][2023-08-29 12-07-36.486 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.SellerController.ListProducts (Napredne baze podataka API)'
][2023-08-29 12-07-36.497 -07:00 [INF] Request GET /api/Seller/list-products completed in 190 ms
][2023-08-29 12-07-37.000 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-07-37.245 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-07-37.250 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-07-37.260 -07:00 [ERR] Connection ID "18014398519682531379", Request ID "80000034-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-07-37.262 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Seller/list-products - - - 200 - application/json;+charset=utf-8 966.7572ms
][2023-08-29 12-07-57.966 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0
][2023-08-29 12-07-57.966 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-57.966 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Login/PostLoginDetails - 0 - 204 - - 0.3018ms
][2023-08-29 12-07-57.971 -07:00 [INF] Request starting HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 85
][2023-08-29 12-07-57.971 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-07-57.972 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-07-57.972 -07:00 [INF] Route matched with {action = "PostLoginDetails", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginDetails(Napredne_baze_podataka_API.Models.UserData) on controller Napredne_baze_podataka_API.Controllers.LoginController (Napredne baze podataka API).
][2023-08-29 12-07-58.166 -07:00 [INF] Executed DbCommand (187ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[AccessToken], [a].[BirthDate], [a].[Email], [a].[FirstName], [a].[LastName], [a].[Password], [a].[PhoneNumber], [a].[RefreshToken], [a].[RegistrationDate], [a].[Role], [a].[UserName]
FROM [Administrators] AS [a]
WHERE [a].[Email] = @___userData_Email_0 AND [a].[Password] = @___userData_Password_1
][2023-08-29 12-07-58.346 -07:00 [INF] Executed DbCommand (172ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[UserName]
FROM [Managers] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-07-58.545 -07:00 [INF] Executed DbCommand (190ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[ID], [m].[AccessToken], [m].[BirthDate], [m].[Email], [m].[FirstName], [m].[LastName], [m].[Password], [m].[PhoneNumber], [m].[RefreshToken], [m].[RegistrationDate], [m].[Role], [m].[SelectedTrainerId], [m].[UserName]
FROM [Members] AS [m]
WHERE [m].[Email] = @___userData_Email_0 AND [m].[Password] = @___userData_Password_1
][2023-08-29 12-07-58.835 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ID], [r].[AccessToken], [r].[BirthDate], [r].[Email], [r].[FirstName], [r].[LastName], [r].[Password], [r].[PhoneNumber], [r].[RefreshToken], [r].[RegistrationDate], [r].[Role], [r].[UserName]
FROM [Receptionists] AS [r]
WHERE [r].[Email] = @___userData_Email_0 AND [r].[Password] = @___userData_Password_1
][2023-08-29 12-07-59.011 -07:00 [INF] Executed DbCommand (170ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sellers] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-07-59.202 -07:00 [INF] Executed DbCommand (185ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ID], [s].[AccessToken], [s].[BirthDate], [s].[Email], [s].[FirstName], [s].[LastName], [s].[Password], [s].[PhoneNumber], [s].[RefreshToken], [s].[RegistrationDate], [s].[Role], [s].[UserName]
FROM [Sponsors] AS [s]
WHERE [s].[Email] = @___userData_Email_0 AND [s].[Password] = @___userData_Password_1
][2023-08-29 12-07-59.376 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[@___userData_Email_0='?' (Size = 4000), @___userData_Password_1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
WHERE [t].[Email] = @___userData_Email_0 AND [t].[Password] = @___userData_Password_1
][2023-08-29 12-07-59.888 -07:00 [INF] Executed DbCommand (478ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [RefreshToken] = @p0
OUTPUT 1
WHERE [ID] = @p1;
][2023-08-29 12-07-59.896 -07:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.JsonResult'.
][2023-08-29 12-07-59.897 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API) in 1925.2368ms
][2023-08-29 12-07-59.897 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.LoginController.PostLoginDetails (Napredne baze podataka API)'
][2023-08-29 12-07-59.903 -07:00 [INF] Request POST /api/Login/PostLoginDetails completed in 1925 ms
][2023-08-29 12-08-00.361 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-08-00.567 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-08-00.573 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-08-00.582 -07:00 [ERR] Connection ID "18014398511092596789", Request ID "80000036-0000-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-08-00.583 -07:00 [INF] Request finished HTTP/1.1 POST http://localhost:55936/api/Login/PostLoginDetails application/json 85 - 200 - application/json;+charset=utf-8 2611.8648ms
][2023-08-29 12-13-57.058 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-08-29 12-13-57.059 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-13-57.059 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 1.2526ms
][2023-08-29 12-13-57.068 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-08-29 12-13-57.068 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-13-57.070 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-13-57.118 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync() on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-08-29 12-13-58.423 -07:00 [INF] Executed DbCommand (172ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-08-29 12-13-58.473 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.DTOs.TrainerDto, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-13-58.474 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API) in 1355.9065ms
][2023-08-29 12-13-58.474 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-13-58.479 -07:00 [INF] Request GET /api/Member/trainers completed in 1406 ms
][2023-08-29 12-13-58.948 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-13-59.159 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-13-59.165 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-13-59.173 -07:00 [ERR] Connection ID "18014398519682531383", Request ID "80000038-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-13-59.174 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 200 - application/json;+charset=utf-8 2106.4270ms
][2023-08-29 12-14-08.134 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-08-29 12-14-08.134 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-14-08.135 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 0.5750ms
][2023-08-29 12-14-08.140 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-08-29 12-14-08.140 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-14-08.146 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-14-08.146 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync() on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-08-29 12-14-08.325 -07:00 [INF] Executed DbCommand (171ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-08-29 12-14-08.327 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.DTOs.TrainerDto, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-14-08.329 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API) in 183.1622ms
][2023-08-29 12-14-08.330 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-14-08.338 -07:00 [INF] Request GET /api/Member/trainers completed in 189 ms
][2023-08-29 12-14-08.966 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-14-09.254 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-14-09.258 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-14-09.266 -07:00 [ERR] Connection ID "18158513703463419961", Request ID "8000003a-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-14-09.268 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 200 - application/json;+charset=utf-8 1127.3078ms
][2023-08-29 12-15-20.848 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-08-29 12-15-20.848 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-15-20.848 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 0.3448ms
][2023-08-29 12-15-20.855 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-08-29 12-15-20.859 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-15-20.861 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-15-20.861 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync() on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-08-29 12-15-21.035 -07:00 [INF] Executed DbCommand (167ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-08-29 12-15-21.115 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.DTOs.TrainerDto, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-15-21.119 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API) in 257.2747ms
][2023-08-29 12-15-21.119 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-15-21.124 -07:00 [INF] Request GET /api/Member/trainers completed in 260 ms
][2023-08-29 12-15-21.502 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-15-21.707 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-15-21.711 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-15-21.717 -07:00 [ERR] Connection ID "18158513703463419963", Request ID "8000003c-0001-fc00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-15-21.718 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 200 - application/json;+charset=utf-8 862.8800ms
][2023-08-29 12-16-59.582 -07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0
][2023-08-29 12-16-59.582 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-16-59.583 -07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:55936/api/Member/trainers - 0 - 204 - - 1.0305ms
][2023-08-29 12-16-59.591 -07:00 [INF] Request starting HTTP/1.1 GET http://localhost:55936/api/Member/trainers - -
][2023-08-29 12-16-59.591 -07:00 [INF] CORS policy execution successful.
][2023-08-29 12-16-59.596 -07:00 [INF] Executing endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-16-59.597 -07:00 [INF] Route matched with {action = "GetAllTrainers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTrainersAsync() on controller Napredne_baze_podataka_API.Controllers.MemberController (Napredne baze podataka API).
][2023-08-29 12-16-59.776 -07:00 [INF] Executed DbCommand (168ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ID], [t].[AccessToken], [t].[BirthDate], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PhoneNumber], [t].[RefreshToken], [t].[RegistrationDate], [t].[Role], [t].[Specialization], [t].[UserName]
FROM [Trainers] AS [t]
][2023-08-29 12-16-59.778 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Napredne_baze_podataka_API.DTOs.TrainerDto, Napredne baze podataka API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-08-29 12-16-59.782 -07:00 [INF] Executed action Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API) in 185.1518ms
][2023-08-29 12-16-59.782 -07:00 [INF] Executed endpoint 'Napredne_baze_podataka_API.Controllers.MemberController.GetAllTrainersAsync (Napredne baze podataka API)'
][2023-08-29 12-16-59.794 -07:00 [INF] Request GET /api/Member/trainers completed in 191 ms
][2023-08-29 12-17-00.276 -07:00 [ERR] The response headers cannot be modified because the response has already started.
System.InvalidOperationException: The response headers cannot be modified because the response has already started.
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.ThrowIfReadOnly()
   at Microsoft.AspNetCore.HttpSys.Internal.HeaderCollection.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionsMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionsMiddleware.cs:line 59
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 24
][2023-08-29 12-17-00.504 -07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
][2023-08-29 12-17-00.509 -07:00 [WRN] The response has already started, the error page middleware will not be executed.
][2023-08-29 12-17-00.517 -07:00 [ERR] Connection ID "18014398519682531389", Request ID "8000003e-0002-fa00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.ThrowResponseAlreadyStartedException(String name)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContext.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Napredne_baze_podataka_API.Middlewares.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\Belkisa\source\repos\Napredne baze podataka API\Middlewares\ExceptionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
][2023-08-29 12-17-00.518 -07:00 [INF] Request finished HTTP/1.1 GET http://localhost:55936/api/Member/trainers - - - 200 - application/json;+charset=utf-8 927.0697ms
]